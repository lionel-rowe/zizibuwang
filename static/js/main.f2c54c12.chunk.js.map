{"version":3,"sources":["assets/cc-cedict.tsv","assets/pinyin-syllables.tsv","content/instructions.md","assets/ZhiMangXing-Regular-subset.ttf","lib/viewportHeightAdjuster.ts","lib/logging.ts","lib/theme.ts","components/PageBackground.tsx","components/Link.tsx","components/Footer.tsx","lib/parse-tsv.ts","config.ts","lib/errors.ts","components/Modal.tsx","lib/fireModal.ts","repositories/cedict.ts","lib/formatters.ts","lib/pinyinToPartsMapping.ts","lib/permute.ts","lib/segmentPinyin.ts","lib/makeFuzzyPinyinRegex.ts","lib/search.ts","lib/b64.ts","lib/queryParams.ts","state/Context.tsx","lib/pinyinize.ts","components/Result.tsx","hooks/useHtmlId.ts","lib/setTitle.ts","components/ResultsDisplay.tsx","components/BasicSearch.tsx","components/AdvancedSearch.tsx","components/SearchForm.tsx","pages/SearchPage.tsx","lib/utils.ts","components/Header.tsx","components/ErrorBoundary.tsx","layouts/MainSubLayout.tsx","components/MainNav.tsx","layouts/MainLayout.tsx","lib/snarkdownEnhanced.ts","pages/DocsPage.tsx","pages/SettingsPage.tsx","components/RouteAnalytics.tsx","AppRouter.tsx","layouts/GlobalStyles.tsx","App.tsx","serviceWorker.js","index.tsx","debug.ts"],"names":["module","exports","setVh","vh","window","innerHeight","document","documentElement","style","setProperty","addEventListener","Result","Synchronicity","theme","createMuiTheme","overrides","MuiTooltip","tooltip","color","backgroundColor","arrow","palette","common","black","white","type","primary","main","light","dark","contrastText","secondary","error","warning","info","success","grey","A100","A200","A400","A700","contrastThreshold","tonalOffset","text","disabled","hint","divider","background","paper","default","action","active","hover","hoverOpacity","selected","disabledBackground","useStyles","makeStyles","root","width","height","position","darken","zIndex","className","Link","React","forwardRef","ref","to","children","absolute","external","props","href","target","rel","process","margin","Footer","classes","Typography","variant","component","rowHeadingsToProps","rows","headers","map","e","obj","forEach","h","i","DB_VERSION","dbVersion","NoDataError","Error","Modal","isOpen","onResolve","title","showCancelButton","icon","confirmButtonText","cancelButtonText","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","disableElevation","onClick","autoFocus","fireModal","createModal","seedDb","db","a","connection","navigator","saveData","fetch","cedictUrl","method","head","contentLength","get","toFixed","HelpOutlineIcon","res","trim","split","line","cell","entries","tx","transaction","objectStore","put","localStorage","removeItem","setItem","Promise","resolve","reject","openDB","upgrade","oldVersion","_newVersion","createObjectStore","clear","_db","store","getKey","getItem","console","Cedict","all","chunkLength","delimiter","parsePinyinTsv","txt","syls","x","initials","pinyinToPartsMapping","Object","create","row","_rowIdx","slice","medial","final","cellIdx","pinyinToPartsMappingPromise","pinyinSyllablesUrl","liftA2","f","b","listApply","curry","fs","xs","concat","apply","cons","orderedPermute","arrArr","n","len","Math","min","length","arrIdxs","Array","fill","_","idx","loop","currArrIdxs","arrIdx","pySylRegexFragment","pySylRegex","RegExp","segmentPinyin","removeTones","py","m","match","replace","stripTones","__","Symbol","$0","contextMappings","isMatch","matchers","parts","every","matcher","part","test","transformParts","replacers","spellPinyin","find","k","filter","Boolean","join","fuzzyReplacements","name","alts","str","indexOf","ch","spellValidAltsWith","enabledFuzzyReplacementIds","push","r","includes","makeAlts","arr","makeRegexWith","spellValidAlts","segments","toLowerCase","normalizeQuery","query","normalize","truncate","overflowFiller","stringify","toString","localizeFns","intPartFormatter","fractionalPartFormatter","numStr","int","fractional","some","_e","makeDecimalFormatter","reduceRight","digit","toCondition","clause","matches","SyntaxError","groups","d","data","pinyinRegex","searchWorker","Worker","pinyinSyls","postMessage","RangeError","onmessage","terminate","results","setTimeout","lines","el","startsWith","conditions","fn","basicSearch","advancedSearch","getQueryParam","TextEncoder","encode","bind","TextDecoder","decode","paramName","URLSearchParams","location","search","_setAllQueryParams","allQueryParams","pushNewHistoryItem","history","newQueryString","from","newPath","pathname","setQueryParam","newVal","set","deleteQueryParam","delete","initialState","charSet","pendingSearchQuery","searchQuery","resultsLoading","cedictDataLoading","page","searchType","JSON","parse","reducer","state","v","queryResultIncrementer","loadResultsFromQuery","dispatch","currentQueryResult","searchFn","message","ErrorOutlineIcon","AppContext","createContext","AppStateProvider","useReducer","value","useMemo","Provider","toneMarks","o","u","A","E","I","O","U","V","withToneMark","syl","lastChar","tone","char","addToneMark","prettify","word","s","isPinyin","marginBottom","charGloss","display","flexWrap","rubyRoot","fontSize","paddingRight","defList","paddingLeft","headwordNoRuby","entry","isLast","useContext","pinyin","def","currentCharVersion","chars","oppCharTypeName","oppCharVersion","renderRuby","key","toUpperCase","item","useHtmlId","prefix","useState","htmlId","setTitle","newTitle","titleSegments","ResultsList","result","loaderOuter","marginTop","justifyContent","loaderInner","zoom","resultsOuter","resultsTotalDisplay","padding","halfWidthHr","flexGrow","helpLinkContainer","helpLink","alignItems","helpIcon","ResultsDisplay","locale","useHistory","outputId","_page","CircularProgress","Pagination","onChange","scrollTo","count","floor","_theme","inputField","searchButton","top","transform","right","marginRight","BasicSearch","searchConditionsId","FormControl","fullWidth","InputLabel","htmlFor","FilledInput","currentTarget","autoComplete","autoCorrect","autoCapitalize","spellCheck","placeholder","endAdornment","InputAdornment","Tooltip","placement","IconButton","aria-label","label","fontFamily","AdvancedSearch","multiline","TabPanel","labelledBy","hidden","SearchForm","searchFormId","submitForm","preventDefault","basicSearchTabId","advancedSearchTabId","basicSearchPanelId","advancedSearchPanelId","onSubmit","Tabs","indicatorColor","Tab","aria-controls","SearchPage","handleQueryParams","args","reduce","acc","cur","Number","xor","useEffect","removeEventListener","paragraph","String","textAlign","paddingTop","paddingBottom","heading","subtitle","Header","tabIndex","ErrorBoundary","undefined","errorInfo","this","setState","whiteSpace","componentStack","Component","MainSubLayout","Container","maxWidth","listRoot","listStyleType","breakpoints","up","navItem","borderRadius","activeNavItem","fade","links","Icon","HomeIcon","InfoIcon","SettingsIcon","MainNav","useLocation","path","TouchRippleProps","child","touchRippleChild","role","MainLayout","snarkdownEnhanced","md","html","l","snarkdown","template","createElement","innerHTML","content","querySelectorAll","textContent","classList","add","contentPromise","contentMdUrl","cache","_instructions","_sampleBlock","_samples","DocsPage","instructions","setInstructions","samples","setSamples","hash","querySelector","scrollIntoView","dangerouslySetInnerHTML","__html","getAttribute","nodeName","origin","queryString","encodeURIComponent","formGroup","SettingsPage","FormGroup","FormLabel","RadioGroup","FormControlLabel","control","Radio","Checkbox","checked","analyticsUrl","REACT_APP__API_URL","correlationId","sessionStorage","uuidv4","staticProps","_version","createLog","event","msg","onUnload","sendBeacon","prevPathAndQuery","RouteAnalytics","body","onbeforeunload","listen","thisPathAndQuery","focusOnRouteChange","outline","prevPathName","FocusOnRouteChange","useRef","current","focus","RedirectPathname","exact","render","AppRouter","basename","useGlobalStyles","src","ZhiMangXing","borderColor","borderStyle","scrollbarColor","scrollbarWidth","WebkitFontSmoothing","MozOsxFontSmoothing","overflowY","minHeight","flexDirection","flex","flexShrink","hr","opacity","down","header","border","boxShadow","lineHeight","textDecoration","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","left","fontWeight","GlobalStyles","App","ThemeProvider","PageBackground","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","getElementById","URL","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","_window","cedict","exposeDebugVars"],"mappings":"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","file":"static/js/main.f2c54c12.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cc-cedict.02fc0569.tsv\";","module.exports = __webpack_public_path__ + \"static/media/pinyin-syllables.42676c8b.tsv\";","module.exports = __webpack_public_path__ + \"static/media/instructions.bb7f885d.md\";","module.exports = __webpack_public_path__ + \"static/media/ZhiMangXing-Regular-subset.c382153c.ttf\";","export {}\n\nconst setVh = () => {\n    const vh = window.innerHeight * 0.01\n    document.documentElement.style.setProperty('--vh', `${vh}px`)\n}\n\nwindow.addEventListener('resize', setVh)\n\nsetVh()\n","let _idx = 0\n\nconst getTimeNowMs = () => new Date().valueOf()\n\nconst getTimeElapsedMs = (prevTimeMs: number) => getTimeNowMs() - prevTimeMs\n\nenum Result {\n    Error,\n    Success,\n}\n\nenum Synchronicity {\n    Sync,\n    Async,\n}\n\nconst withTimeLogging = <T>(fn: T & Function): T => {\n    if (process.env.NODE_ENV !== 'development') {\n        return fn\n    }\n\n    return ((...args: any) => {\n        const idx = _idx++\n        const name = fn.name || '[anonymous]'\n        const startTime = getTimeNowMs()\n\n        const logTimeElapsed = (\n            synchronicity: Synchronicity,\n            result: Result,\n        ) => {\n            const isSuccess = result === Result.Success\n            const isAsync = synchronicity === Synchronicity.Async\n            const method = isSuccess ? 'info' : 'error'\n\n            console[method](\n                `[${idx}] ${isAsync ? 'Async function' : 'Function'} ${name} ${\n                    isSuccess ? 'completed' : 'errored'\n                } in ${getTimeElapsedMs(startTime)}\\xa0ms`,\n            )\n        }\n\n        try {\n            const val = fn(...args)\n\n            if (val instanceof Promise) {\n                return val\n                    .catch((e) => {\n                        logTimeElapsed(Synchronicity.Async, Result.Error)\n\n                        throw e\n                    })\n                    .then((val2) => {\n                        logTimeElapsed(Synchronicity.Async, Result.Success)\n\n                        return val2\n                    })\n            } else {\n                logTimeElapsed(Synchronicity.Sync, Result.Success)\n\n                return val\n            }\n        } catch (e) {\n            logTimeElapsed(Synchronicity.Sync, Result.Error)\n\n            throw e\n        }\n    }) as any as T\n}\n\nif (process.env.NODE_ENV === 'development') {\n    ;(window as any).withTimeLogging = withTimeLogging\n}\n\nexport { withTimeLogging }\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport const theme = createMuiTheme({\n    overrides: {\n        MuiTooltip: {\n            tooltip: {\n                color: '#000',\n                backgroundColor: 'ivory',\n            },\n            arrow: {\n                color: 'ivory',\n            },\n        },\n    },\n    palette: {\n        common: { black: '#000', white: '#fff' },\n        type: 'dark',\n        primary: {\n            main: '#26c6dd',\n            light: 'rgb(81,209,227)',\n            dark: 'rgb(26,138,154)',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        secondary: {\n            main: '#f13a64',\n            light: 'rgb(91,119,146)',\n            dark: 'rgb(35,59,83)',\n            contrastText: '#fff',\n        },\n        error: {\n            light: '#e57373',\n            main: '#f44336',\n            dark: '#d32f2f',\n            contrastText: '#fff',\n        },\n        warning: {\n            light: '#ffb74d',\n            main: '#ff9800',\n            dark: '#f57c00',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        info: {\n            light: '#64b5f6',\n            main: '#2196f3',\n            dark: '#1976d2',\n            contrastText: '#fff',\n        },\n        success: {\n            light: '#81c784',\n            main: '#4caf50',\n            dark: '#388e3c',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        grey: {\n            '50': '#fafafa',\n            '100': '#f5f5f5',\n            '200': '#eeeeee',\n            '300': '#e0e0e0',\n            '400': '#bdbdbd',\n            '500': '#9e9e9e',\n            '600': '#757575',\n            '700': '#616161',\n            '800': '#424242',\n            '900': '#212121',\n            A100: '#d5d5d5',\n            A200: '#aaaaaa',\n            A400: '#303030',\n            A700: '#616161',\n        },\n        contrastThreshold: 3,\n        tonalOffset: 0.2,\n        text: {\n            primary: '#fff',\n            secondary: 'rgba(255,255,255,0.7)',\n            disabled: 'rgba(255,255,255,0.5)',\n            hint: 'rgba(255,255,255,0.5)',\n        },\n        divider: 'rgba(255,255,255,0.12)',\n        background: {\n            paper: '#424242',\n            default: '#121212',\n        },\n        action: {\n            active: '#fff',\n            hover: 'rgba(255,255,255,0.08)',\n            hoverOpacity: 0.08,\n            selected: 'rgba(255,255,255,0.16)',\n            disabled: 'rgba(255,255,255,0.3)',\n            disabledBackground: 'rgba(255,255,255,0.12)',\n        },\n    },\n})\n","import React from 'react'\nimport { makeStyles, darken } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100vw',\n        height: '100vh',\n        position: 'fixed',\n        background: `linear-gradient(180deg, #080808, ${darken(\n            theme.palette.primary.main,\n            0.8,\n        )})`,\n        zIndex: -1,\n    },\n}))\n\nexport default () => {\n    const { root } = useStyles()\n\n    return <div className={root} />\n}\n","// @ts-nocheck\n\nimport React from 'react'\nimport { Link as RouterLink, LinkProps } from 'react-router-dom'\n\nconst Link: React.FC<\n    LinkProps<any> & {\n        absolute?: boolean\n        external?: boolean\n    }\n> = React.forwardRef(\n    ({ to = '', children, absolute, external, ...props }, ref) => {\n        if (external) {\n            return (\n                <a\n                    href={to}\n                    ref={ref}\n                    target='_blank'\n                    rel='noopener noreferrer'\n                >\n                    {children}\n                </a>\n            )\n        }\n\n        if (!absolute && to[0] === '/') {\n            to = `${process.env.PUBLIC_URL}${to}`\n        }\n        return (\n            <RouterLink ref={ref} {...props} to={to}>\n                {children}\n            </RouterLink>\n        )\n    },\n)\n\nexport default Link\n","import React from 'react'\nimport { Typography } from '@material-ui/core'\nimport Link from './Link'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    root: { margin: '2em auto' },\n}))\n\nconst Footer: React.FC = () => {\n    const classes = useStyles()\n\n    return (\n        <>\n            <footer className={classes.root}>\n                <div>\n                    <hr />\n                    <Typography\n                        style={{ margin: '1.5em auto' }}\n                        variant='body1'\n                        component='p'\n                    >\n                        Data from{' '}\n                        <Link external to='https://cc-cedict.org/wiki/'>\n                            CC-CEDICT\n                        </Link>{' '}\n                        (\n                        <Link\n                            external\n                            to='https://creativecommons.org/licenses/by-sa/3.0/'\n                        >\n                            CC BY-SA 3.0\n                        </Link>\n                        ).\n                    </Typography>\n                </div>\n            </footer>\n        </>\n    )\n}\n\nexport default Footer\n","const parseTsv = (tsv: string) => {\n    const lines = tsv.trim().split(/\\r?\\n/)\n\n    return lines.map((line) => {\n        const cells = line.split('\\t').map((cell) => cell.trim())\n\n        return cells\n    })\n}\n\nconst rowHeadingsToProps = (rows: string[][]) => {\n    const [headers, ...entries] = rows\n\n    return entries.map((e) => {\n        const obj: { [key: string]: string } = {}\n\n        headers.forEach((h, i) => (obj[h] = e[i]))\n\n        return obj\n    })\n}\n\nexport { parseTsv, rowHeadingsToProps }\n","import dbVersion from './db-version.json'\n\nexport const PAGE_TITLE = 'Zi Zi Bu Wang'\nexport const TITLE_DELIMITER = ' - '\nexport const TITLE_SEGMENT_TRUNCATE_LENGTH = 50\n\nexport const DB_VERSION = dbVersion\nexport const MAX_TIMEOUT = 10_000\nexport const DB_NAME = 'dict_data'\nexport const CEDICT_TABLE_NAME = 'cedict'\n\nexport const RESULTS_PER_PAGE = 50\n","class NoDataError extends Error {}\n\nexport { NoDataError }\n","import React from 'react'\n\nimport {\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions,\n} from '@material-ui/core'\n\ninterface ModalOptions {\n    text: string\n    title?: string\n    icon?: React.FC\n    showCancelButton?: boolean\n    confirmButtonText?: string\n    cancelButtonText?: string\n}\n\nconst Modal = ({\n    isOpen,\n    onResolve,\n    text,\n    title,\n    icon: Icon,\n    showCancelButton,\n    confirmButtonText,\n    cancelButtonText,\n}: ModalOptions & { isOpen: boolean; onResolve: (val: boolean) => void }) => {\n    return (\n        <Dialog\n            open={isOpen}\n            onClose={() => onResolve(false)}\n            aria-labelledby='alert-dialog-title'\n            aria-describedby='alert-dialog-description'\n        >\n            {/* {Icon && <Icon />} */}\n            {title && (\n                <DialogTitle id='alert-dialog-title'>{title}</DialogTitle>\n            )}\n            <DialogContent>\n                <DialogContentText id='alert-dialog-description'>\n                    {text}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant='contained'\n                    disableElevation\n                    onClick={() => onResolve(true)}\n                    color='primary'\n                    autoFocus\n                >\n                    {confirmButtonText ?? 'Confirm'}\n                </Button>\n                {showCancelButton && (\n                    <Button\n                        // variant='contained'\n                        onClick={() => onResolve(false)}\n                        // color='secondary'\n                    >\n                        {cancelButtonText ?? 'Cancel'}\n                    </Button>\n                )}\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default Modal\n","import { createModal } from 'react-modal-promise'\nimport Modal from '../components/Modal'\n\nconst fireModal = createModal(Modal)\n\nexport default fireModal\n","import { parseTsv, rowHeadingsToProps } from '../lib/parse-tsv'\nimport { DB_NAME, CEDICT_TABLE_NAME, DB_VERSION } from '../config'\nimport { openDB, IDBPDatabase } from 'idb'\n\nimport cedictUrl from '../assets/cc-cedict.tsv'\nimport { NoDataError } from '../lib/errors'\nimport fireModal from '../lib/fireModal'\n\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline'\n\nconst DB_REQUIRES_SEEDING = 'dbRequiresSeeding'\nconst CEDICT_TSV_ETAG = 'cedictTsvEtag'\n\nexport const seedDb = async (db: IDBPDatabase) => {\n    const connection = (navigator as any).connection || {}\n\n    if (\n        process.env.NODE_ENV === 'development' || // debug\n        connection.saveData ||\n        connection.type === 'cellular'\n    ) {\n        const head = await fetch(cedictUrl, {\n            method: 'HEAD',\n        })\n\n        const contentLength = head.headers.get('content-length')\n\n        const title = contentLength\n            ? `Download ${(+contentLength / 1000 / 1000).toFixed(1)}\\xa0MB?`\n            : 'Download data?'\n\n        const userConfirmed = await fireModal({\n            showCancelButton: true,\n            confirmButtonText: 'Download',\n            title,\n            text: 'This is required the first time you run this app. Consider switching to a Wi-Fi connection.',\n            icon: HelpOutlineIcon,\n        })\n\n        if (!userConfirmed) {\n            // TODO - show app load fail state\n\n            throw new NoDataError('User declined to download data.')\n        }\n    }\n\n    const res = await fetch(cedictUrl)\n    const text = await res.text()\n\n    const rows = parseTsv(text)\n    const entries = rowHeadingsToProps(rows)\n\n    const tx = db.transaction(CEDICT_TABLE_NAME, 'readwrite')\n    const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n    store.put(entries, 'entries')\n\n    localStorage.removeItem(DB_REQUIRES_SEEDING)\n    localStorage.setItem(CEDICT_TSV_ETAG, res.headers.get('etag') || 'unknown')\n\n    return\n}\n\nexport const db = new Promise<IDBPDatabase>(async (resolve, reject) => {\n    const _db = await openDB(DB_NAME, DB_VERSION, {\n        upgrade(db, oldVersion, _newVersion, transaction) {\n            if (!oldVersion) {\n                db.createObjectStore(CEDICT_TABLE_NAME)\n            }\n\n            if (oldVersion < 1582933903995) {\n                localStorage.clear()\n\n                const store = transaction.objectStore(CEDICT_TABLE_NAME)\n\n                store.clear()\n\n                localStorage.setItem(DB_REQUIRES_SEEDING, 'yes')\n            }\n        },\n    })\n\n    const tx = _db.transaction(CEDICT_TABLE_NAME)\n    const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n    const entriesExist = await store.getKey('entries')\n\n    if (!entriesExist || localStorage.getItem(DB_REQUIRES_SEEDING)) {\n        try {\n            await seedDb(_db)\n        } catch (e) {\n            console.error(e)\n\n            reject(e)\n        }\n    }\n\n    resolve(_db)\n})\n\nexport const Cedict = {\n    all: new Promise<CedictEntry[]>(async (resolve, reject) => {\n        try {\n            const _db = await db\n\n            const tx = _db.transaction(CEDICT_TABLE_NAME)\n            const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n            const entries = await store.get('entries')\n\n            resolve(entries)\n        } catch (e) {\n            console.error(e)\n\n            reject(e)\n        }\n    }),\n}\n\nexport default Cedict\n","// import { toChineseInt, toChineseFractional, DIAN } from './chineseNumerals'\n\nconst makeDecimalFormatter =\n    (\n        intPartFormatter: NumberPartFormatter,\n        fractionalPartFormatter: NumberPartFormatter,\n        delimiter: string,\n    ) =>\n    (numStr: number | string) => {\n        const [int, fractional] = numStr.toString().split('.')\n\n        if ([int, fractional].some((n) => n && !/^\\d+$/.test(n))) {\n            return 'NaN'\n        }\n\n        try {\n            return (\n                intPartFormatter(int) +\n                (fractional\n                    ? delimiter + fractionalPartFormatter(fractional)\n                    : '')\n            )\n        } catch (_e) {\n            return 'NaN'\n        }\n    }\n\n// export const toChineseNum = makeDecimalFormatter(\n//     toChineseInt,\n//     toChineseFractional,\n//     DIAN,\n// )\n\ntype NumberPartFormatter = (digitString: string) => string\n\nexport const normalizeQuery = (query: string) =>\n    query.normalize('NFC').replace(/ü/g, 'v')\n\nexport const truncate =\n    (len: number, overflowFiller = '…') =>\n    (str: string) =>\n        str.length > len\n            ? str.slice(0, len - overflowFiller.length) + overflowFiller\n            : str\n\n// WeChat compat\nexport const toLocaleString = (locale: Locale) => (n: number | string) =>\n    localizeFns[locale](n)\n\nconst chunkWithDelimiter =\n    (chunkLength: number, delimiter: string) => (n: number | string) =>\n        n\n            .toString()\n            .split('')\n            .reduceRight(\n                (str, digit, idx, arr) =>\n                    (idx && !((arr.length - idx) % chunkLength)\n                        ? delimiter\n                        : '') +\n                    digit +\n                    str,\n                '',\n            )\n\nexport type Locale = 'en-US' | 'zh-Hans' | 'zh-Hant'\n// | 'zh-Hans-u-nu-hanidec' // TODO\n// | 'zh-Hant-u-nu-hanidec' // TODO\n\nconst stringify = (x: string | number) => x.toString()\n\nconst localizeFns: Record<Locale, (n: number | string) => string> = {\n    'en-US': makeDecimalFormatter(chunkWithDelimiter(3, ','), stringify, '.'),\n    'zh-Hans': stringify,\n    'zh-Hant': stringify,\n    // 'zh-Hans-u-nu-hanidec': toChineseNum, // TODO\n    // 'zh-Hant-u-nu-hanidec': toChineseNum, // TODO\n}\n","// modified from http://pinyin.info/rules/initials_finals.html\nimport pinyinSyllablesUrl from '../assets/pinyin-syllables.tsv'\n\nimport { Parts } from './makeFuzzyPinyinRegex'\n\nexport const parsePinyinTsv = (txt: string) => {\n    const syls = txt.split('\\n').map((x) => x.split('\\t'))\n\n    const [initials, ...rows] = syls\n\n    const pinyinToPartsMapping: Record<string, Parts> = Object.create(null)\n\n    rows.forEach((row, _rowIdx) => {\n        const [medial, final] = row.slice(0, 2)\n\n        row.forEach((cell, cellIdx) => {\n            if (cellIdx < 2 || !cell.trim()) return\n\n            pinyinToPartsMapping[cell] = [\n                initials[cellIdx] || null,\n                medial || null,\n                final || null,\n            ]\n        })\n    })\n\n    return pinyinToPartsMapping\n}\n\nexport const pinyinToPartsMappingPromise = new Promise<Record<string, Parts>>(\n    async (resolve) => {\n        const res = await fetch(pinyinSyllablesUrl)\n        const txt = await res.text()\n\n        const pinyinToPartsMapping = parsePinyinTsv(txt)\n\n        resolve(pinyinToPartsMapping)\n    },\n)\n","// @ts-nocheck\n\n// GENERIC FUNCTIONS\n\n// replicateM n act performs the action n times, gathering the results.\n// replicateM :: (Applicative m) => Int -> m a -> m [a]\nconst replicateM = (n, f) => {\n    const loop = (x) => (x <= 0 ? [[]] : liftA2(cons, f, loop(x - 1)))\n\n    return loop(n)\n}\n\n// Lift a binary function to actions.\n// liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c\nconst liftA2 = (f, a, b) => listApply(a.map(curry(f)), b)\n\n// <*>\n// listApply :: [(a -> b)] -> [a] -> [b]\nconst listApply = (fs, xs) =>\n    [].concat.apply(\n        [],\n        fs.map((f) =>\n            [].concat.apply(\n                [],\n                xs.map((x) => [f(x)]),\n            ),\n        ),\n    )\n\n// curry :: ((a, b) -> c) -> a -> b -> c\nconst curry = (f) => (a) => (b) => f(a, b)\n\n// cons :: a -> [a] -> [a]\nconst cons = (x, xs) => [x].concat(xs)\n\nexport const orderedPermute = <T>(arrArr: T[][]): T[][] => {\n    const len = Math.min(...arrArr.map((x) => x.length))\n\n    const arrIdxs = new Array(arrArr.length).fill(null).map((_, idx) => idx)\n\n    return replicateM(len, arrIdxs).map((currArrIdxs) =>\n        currArrIdxs.map((arrIdx, idx) => arrArr[arrIdx][idx]),\n    )\n}\n","/**\n * Segment pinyin into syllables\n *\n * http://pinyin.info/romanization/hanyu/syllable_boundaries.html\n *\n * > Hanyu Pinyin's syllables are presumed to begin with a consonant (including y and w, for the purpose of simplicity) or consonant cluster (ch, sh, or zh) unless something -- the beginning of a word, a hyphen, or an apostrophe -- indicates otherwise.\n */\n\n// consonants: iex> ?a..?z |> Enum.reject(&(Enum.member?('aeiouv', &1)))\nconst vowel = 'aeiouv'\nconst consonant = 'bcdfghjklmnpqrstwxyz'\n\nconst pySylRegexFragment = `(?:^|\\\\b|[${consonant}]h?)(?:[${vowel}]+(?:(?:ng?)?)r?)[1-5]?(?=$|\\\\b|[${consonant}]h?)`\n\n// const pyWordRegex = new RegExp(`^(?:${pySylRegexFragment})+$`, 'gi')\nconst pySylRegex = new RegExp(`${pySylRegexFragment}`, 'gi')\n\nexport const stripTones = (py: string) => py.replace(/[1-5]$/, '')\n\nexport const segmentPinyin = (removeTones: boolean) => (py: string) => {\n    const m = py.match(pySylRegex)\n\n    return m ? [...m].map((py) => (removeTones ? stripTones(py) : py)) : null\n}\n\nexport const isPinyinish = (str: string) =>\n    str\n        .split(/[^a-z0-9]+/i)\n        .filter(Boolean)\n        .every(segmentPinyin(false))\n","import { orderedPermute } from './permute'\nimport { segmentPinyin } from './segmentPinyin'\n\nconst __ = Symbol('__')\nconst $0 = Symbol('$0')\n\ntype ReplaceFn = (...args: string[]) => string\n\ntype Part = string | null\ntype Matcher = Part | RegExp | typeof __\ntype Replacer = Part | ReplaceFn | typeof $0\n\nexport type Parts = [Part, Part, Part]\ntype Matchers = [Matcher, Matcher, Matcher]\ntype Replacers = [Replacer, Replacer, Replacer]\ntype MatchReplace = [Matchers, Replacers]\n\n// match first only\nconst contextMappings: MatchReplace[] = [\n    // jun etc.\n    [\n        [/^[jqx]$/, 'v', 'en'],\n        [$0, 'u', 'n'],\n    ],\n\n    // yun\n    [\n        [null, 'v', 'en'],\n        [$0, 'yu', 'n'],\n    ],\n\n    // jue etc.\n    [\n        [/^[jqx]$/, 'v', __],\n        [$0, 'u', $0],\n    ],\n\n    // wu etc.\n    [\n        [null, 'u', null],\n        [$0, 'wu', $0],\n    ],\n    [\n        [null, 'u', __],\n        [$0, 'w', $0],\n    ],\n\n    // yi etc.\n    [\n        [null, 'i', null],\n        [$0, 'yi', $0],\n    ],\n    [\n        [null, 'i', /^e(ng?)$/],\n        [$0, 'yi', '$1'],\n    ],\n    [\n        [null, 'i', __],\n        [$0, 'y', $0],\n    ],\n\n    // yu etc.\n    [\n        [null, 'v', __],\n        [$0, 'yu', $0],\n    ],\n\n    // hui etc.\n    [\n        [__, 'u', 'ei'],\n        [$0, $0, 'i'],\n    ],\n\n    // liu etc.\n    [\n        [__, 'i', 'ou'],\n        [$0, $0, 'u'],\n    ],\n\n    // zero final\n    [\n        [/^[zcs]h?|r$/, null, null],\n        [$0, 'i', $0],\n    ],\n\n    // lin, ling etc.\n    [\n        [__, /^[iuv]$/, /^e(ng?)$/],\n        [$0, $0, '$1'],\n    ],\n]\n\nconst isMatch = (matchers: Matchers) => (parts: Parts) => {\n    return matchers.every((matcher, idx) => {\n        const part = parts[idx]\n\n        return matcher === __\n            ? true\n            : matcher instanceof RegExp\n            ? part && matcher.test(part)\n            : part === matcher\n    })\n}\n\nconst transformParts = (parts: Parts, [matchers, replacers]: MatchReplace) =>\n    parts.map((part, idx) => {\n        return replacers[idx] === $0\n            ? part\n            : matchers[idx] instanceof RegExp\n            ? part?.replace(matchers[idx] as RegExp, replacers[idx] as string)\n            : replacers[idx]\n    }) as Parts\n\nexport const spellPinyin = (parts: Parts) => {\n    const m = contextMappings.find(([k, _v]) => isMatch(k)(parts))\n\n    if (!m) {\n        return parts.filter(Boolean).join('')\n    }\n\n    return transformParts(parts, m).filter(Boolean).join('')\n}\n\nconst jToZ = (ch: string) => 'zcs'['jqx'.indexOf(ch)]\nconst zToJ = (ch: string) => 'jqx'['zcs'.indexOf(ch)]\nconst jToZh = (ch: string) => 'zcs'['jqx'.indexOf(ch)] + 'h'\nconst zhToJ = (str: string) => 'jqx'['zcs'.indexOf(str[0])]\n\nexport const fuzzyReplacements: {\n    id: FuzzyReplacementId\n    name: string\n    alts: MatchReplace[]\n}[] = [\n    {\n        id: 'zh-j',\n        name: 'zh ⇄ j, ch ⇄ q, sh ⇄ x',\n        alts: [\n            [\n                [/^[zcs]h$/, null, __],\n                [zhToJ, 'i', $0],\n            ],\n            [\n                [/^[jqx]$/, 'i', __],\n                [jToZh, null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'z-j',\n        name: 'z ⇄ j, c ⇄ q, s ⇄ x',\n        alts: [\n            [\n                [/^[zcs]$/, null, __],\n                [zToJ, 'i', $0],\n            ],\n            [\n                [/^[jqx]$/, 'i', __],\n                [jToZ, null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'z-zh',\n        name: 'z ⇄ zh, c ⇄ ch, s ⇄ sh',\n        alts: [\n            [\n                [/^[zcs]$/, __, __],\n                ['$&h', $0, $0],\n            ],\n            [\n                [/^[zcs]h$/, __, __],\n                [(m) => m[0], $0, $0],\n            ],\n        ],\n    },\n    {\n        id: 'n-l',\n        name: 'n ⇄ l',\n        alts: [\n            [\n                ['n', __, __],\n                ['l', $0, $0],\n            ],\n            [\n                ['l', __, __],\n                ['n', $0, $0],\n            ],\n        ],\n    },\n    {\n        id: 'f-hu',\n        name: 'f ⇄ hu',\n        alts: [\n            [\n                ['f', 'u', null],\n                ['h', $0, $0],\n            ],\n            [\n                ['h', 'u', null],\n                ['f', $0, $0],\n            ],\n            [\n                ['f', null, __],\n                ['h', 'u', $0],\n            ],\n            [\n                ['h', 'u', __],\n                ['f', null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'n-ng',\n        name: '-n ⇄ -ng',\n        alts: [\n            [\n                [__, __, /^.+n$/],\n                [$0, $0, '$&g'],\n            ],\n            [\n                [__, __, /^.+ng$/],\n                [$0, $0, (m) => m.slice(0, -1)],\n            ],\n        ],\n    },\n]\n\nexport type FuzzyReplacementId =\n    | 'zh-j'\n    | 'z-j'\n    | 'z-zh'\n    | 'n-l'\n    | 'f-hu'\n    | 'n-ng'\n\nconst makeAlts = (\n    py: string,\n    pinyinToPartsMapping: Record<string, Parts>,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n) => {\n    const alts: Parts[] = []\n\n    const parts = pinyinToPartsMapping[py]\n\n    if (!parts) return null\n\n    alts.push(parts)\n\n    const enabledReplacements = fuzzyReplacements.filter((r) =>\n        enabledFuzzyReplacementIds.includes(r.id),\n    )\n\n    enabledReplacements.forEach((r) => {\n        r.alts.forEach((a) => {\n            if (isMatch(a[0])(parts)) {\n                alts.push(transformParts(parts, a))\n            }\n        })\n    })\n\n    return alts\n}\n\nconst spellValidAltsWith =\n    (\n        pinyinToPartsMapping: Record<string, Parts>,\n        enabledFuzzyReplacementIds: FuzzyReplacementId[],\n    ) =>\n    (py: string) => {\n        const alts = makeAlts(\n            py,\n            pinyinToPartsMapping,\n            enabledFuzzyReplacementIds,\n        )\n\n        if (!alts) return []\n\n        return (orderedPermute(alts) as Parts[])\n            .map(spellPinyin)\n            .filter((py) => pinyinToPartsMapping[py])\n            .filter((py, idx, arr) => arr.indexOf(py) === idx)\n    }\n\nexport const makeRegexWith =\n    (\n        pinyinToPartsMapping: Record<string, Parts>,\n        enabledFuzzyReplacementIds: FuzzyReplacementId[],\n    ) =>\n    (py: string) => {\n        const spellValidAlts = spellValidAltsWith(\n            pinyinToPartsMapping,\n            enabledFuzzyReplacementIds,\n        )\n\n        const segments = (segmentPinyin(true)(py.toLowerCase()) || [])\n            .filter(Boolean)\n            .map((x) => {\n                const alts = spellValidAlts(x)\n                return alts.length ? `(?:${alts.join('|')})` : null\n            })\n            .filter(Boolean)\n\n        const regex = segments.length\n            ? new RegExp(\n                  `^(?:[^a-z]|\\\\b)${segments.join('[^a-z]+')}(?:\\\\b|[^a-z])$`,\n                  'i',\n              )\n            : null\n\n        process.env.NODE_ENV === 'development' && console.info(regex)\n\n        return regex\n    }\n","import { MAX_TIMEOUT } from '../config'\nimport { withTimeLogging } from './logging'\n\nimport { pinyinToPartsMappingPromise } from './pinyinToPartsMapping'\nimport { makeRegexWith, FuzzyReplacementId } from './makeFuzzyPinyinRegex'\nimport { isPinyinish, segmentPinyin } from './segmentPinyin'\nimport { normalizeQuery } from './formatters'\n\nconst _basicSearch = async (\n    query: string,\n    data: any /* TODO */,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n): Promise<{ results?: CedictEntry[] }> => {\n    query = normalizeQuery(query)\n\n    let results\n\n    const pinyinToPartsMapping = await pinyinToPartsMappingPromise\n\n    const pinyinRegex = makeRegexWith(\n        pinyinToPartsMapping,\n        enabledFuzzyReplacementIds,\n    )(query)\n\n    const searchWorker = new Worker(\n        `${process.env.PUBLIC_URL}/basic-search-worker.js`,\n    )\n\n    const pinyinSyls = isPinyinish(query) ? segmentPinyin(true)(query) : []\n\n    searchWorker.postMessage({\n        type: 'SEARCH',\n        query,\n        pinyinRegex,\n        entries: data,\n        pinyinSyls,\n    })\n\n    if (/^\\s*$/.test(query)) {\n        throw new RangeError('Please enter some search terms.')\n    }\n\n    results = await new Promise<CedictEntry[]>((resolve, reject) => {\n        searchWorker.onmessage = ({ data }) => {\n            if (data.type === 'ERROR') {\n                reject(data.error)\n            }\n\n            searchWorker.terminate()\n\n            resolve(data.results)\n        }\n\n        setTimeout(() => {\n            searchWorker.terminate()\n\n            reject(new RangeError('Timeout exceeded.'))\n        }, MAX_TIMEOUT)\n    })\n\n    return { results }\n}\n\nconst _advancedSearch = async (\n    query: string,\n    data: any /* TODO */,\n): Promise<{ results?: CedictEntry[] }> => {\n    query = normalizeQuery(query)\n\n    let results\n\n    let conditions: SearchCondition[]\n\n    const lines = query\n        .split(/\\r?\\n/)\n        .map((el) => el.trim())\n        .filter((el) => el && !el.startsWith('#'))\n\n    if (lines.length === 0) {\n        throw new RangeError('Must have at least one condition.')\n    } else {\n        conditions = lines.map(toCondition)\n    }\n\n    const searchWorker = new Worker(\n        `${process.env.PUBLIC_URL}/advanced-search-worker.js`,\n    )\n\n    searchWorker.postMessage({\n        type: 'SEARCH',\n        conditions,\n        entries: data,\n    })\n\n    results = await new Promise<CedictEntry[]>((resolve, reject) => {\n        searchWorker.onmessage = ({ data }) => {\n            if (data.type === 'ERROR') {\n                reject(data.error)\n            }\n\n            searchWorker.terminate()\n\n            resolve(data.results)\n        }\n\n        setTimeout(() => {\n            searchWorker.terminate()\n\n            reject(new RangeError('Timeout exceeded.'))\n        }, MAX_TIMEOUT)\n    })\n\n    return { results }\n}\n\nfunction toCondition(clause: string): SearchCondition {\n    const matcher = /^(?<prop>\\S+)\\s+(?<method>\\S+)\\s+(?<arg>.+)$/\n\n    const matches = clause.match(matcher)\n\n    if (!matches) {\n        throw new SyntaxError(\n            'Each condition must be formatted as \"subject verb object\".',\n        )\n    }\n\n    return { ...(matches.groups as any as SearchCondition) }\n}\n\nconst [basicSearch, advancedSearch] = [_basicSearch, _advancedSearch].map(\n    withTimeLogging,\n)\n\nexport { basicSearch, advancedSearch }\n","const _encodeUtf8 = ((e) => e.encode.bind(e))(new TextEncoder())\nconst _decodeUtf8 = ((d) => d.decode.bind(d))(new TextDecoder())\n\nexport const decodeB64 = (b64: string) => {\n    const binStr = atob(b64)\n\n    const binArr = binStr.split('').map((char) => char.charCodeAt(0))\n\n    const bin = new Uint8Array(binArr)\n\n    return _decodeUtf8(bin)\n}\n\nexport const encodeB64 = (str: string) => {\n    const bin = _encodeUtf8(str)\n\n    const binStr = Array.from(bin)\n        .map((n) => String.fromCharCode(n))\n        .join('')\n\n    return btoa(binStr)\n}\n\nconst _urlSafe = (b64: string) =>\n    b64.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_')\n\nconst _urlUnsafe = (b64UrlSafe: string) => {\n    const noPadding = b64UrlSafe.replace(/-/g, '+').replace(/_/g, '/')\n\n    const padLength = 4 - (noPadding.length % 4 || 4)\n\n    return noPadding + '='.repeat(padLength)\n}\n\nexport const encodeB64UrlSafe = (str: string) => _urlSafe(encodeB64(str))\n\nexport const decodeB64UrlSafe = (b64UrlSafe: string) =>\n    decodeB64(_urlUnsafe(b64UrlSafe))\n","import { History } from 'history'\nimport { decodeB64UrlSafe, encodeB64UrlSafe } from './b64'\n\nconst getQueryParam = (paramName: string) =>\n    new URLSearchParams(window.location.search).get(paramName)\n\nconst _setAllQueryParams = (\n    allQueryParams: URLSearchParams,\n    pushNewHistoryItem: boolean,\n    history: History,\n) => {\n    const newQueryString = Array.from(allQueryParams).length\n        ? '?' + allQueryParams.toString()\n        : ''\n\n    const newPath = window.location.pathname + newQueryString\n\n    history[pushNewHistoryItem ? 'push' : 'replace'](newPath)\n}\n\nconst clearAllQueryParams = (pushNewHistoryItem: boolean, history: History) => {\n    _setAllQueryParams(new URLSearchParams([]), pushNewHistoryItem, history)\n}\n\nconst setQueryParam = (\n    paramName: string,\n    newVal: string,\n    pushNewHistoryItem: boolean,\n    history: History,\n) => {\n    const allQueryParams = new URLSearchParams(window.location.search)\n\n    allQueryParams.set(paramName, newVal)\n\n    _setAllQueryParams(allQueryParams, pushNewHistoryItem, history)\n}\n\nconst deleteQueryParam = (\n    paramName: string,\n    pushNewHistoryItem: boolean,\n    history: History,\n) => {\n    const allQueryParams = new URLSearchParams(window.location.search)\n\n    allQueryParams.delete(paramName)\n\n    _setAllQueryParams(allQueryParams, pushNewHistoryItem, history)\n}\n\nconst getB64QueryParam = (paramName: string) => {\n    const val = getQueryParam(paramName)\n\n    return val && decodeB64UrlSafe(val)\n}\n\nconst setB64QueryParam = (\n    paramName: string,\n    newVal: string,\n    pushNewHistoryItem: boolean,\n    history: History,\n) => {\n    const b64 = encodeB64UrlSafe(newVal)\n\n    setQueryParam(paramName, b64, pushNewHistoryItem, history)\n}\n\nexport {\n    getQueryParam,\n    setQueryParam,\n    deleteQueryParam,\n    getB64QueryParam,\n    setB64QueryParam,\n    clearAllQueryParams,\n}\n","import React, { useReducer, useMemo } from 'react'\nimport Cedict from '../repositories/cedict'\nimport { basicSearch, advancedSearch } from '../lib/search'\nimport fireModal from '../lib/fireModal'\nimport { setQueryParam } from '../lib/queryParams'\n\nimport { History } from 'history'\n\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline'\nimport { FuzzyReplacementId } from '../lib/makeFuzzyPinyinRegex'\n\nexport interface AppState {\n    charSet: 'trad' | 'simp'\n    results: CedictEntry[] | null\n    error: Error | null\n    pendingSearchQuery: string\n    searchQuery: string\n    resultsLoading: boolean\n    cedictDataLoading: boolean\n    page: number | null\n    searchType: 'basic' | 'advanced'\n    enabledFuzzyReplacementIds: Record<FuzzyReplacementId, boolean>\n}\n\ntype SearchActionType = Partial<AppState>\n\nconst initialState: AppState = {\n    charSet: (localStorage.getItem('charSet') || 'simp') as 'trad' | 'simp',\n    results: null,\n    error: null,\n    pendingSearchQuery: '',\n    searchQuery: '',\n    resultsLoading: false,\n    cedictDataLoading: true,\n    page: null,\n    searchType: 'basic',\n    enabledFuzzyReplacementIds: JSON.parse(\n        localStorage.getItem('enabledFuzzyReplacementIds') ||\n            '{\"zh-j\":true,\"z-j\":false,\"n-l\":false,\"z-zh\":true,\"f-hu\":false,\"n-ng\":true}',\n    ) as Record<FuzzyReplacementId, boolean>,\n}\n\nconst reducer = (\n    state: AppState = initialState,\n    action: SearchActionType,\n): AppState => {\n    Object.entries(action).forEach(([k, v]) => {\n        ;(state as any)[k] = v\n    })\n\n    return { ...state }\n}\n\ninterface LoadResultsFromQueryOptions {\n    pushNewHistoryItem?: boolean\n    searchType: 'advanced' | 'basic'\n    history: History\n}\n\nlet queryResultIncrementer = 0\n\nconst loadResultsFromQuery = async (\n    query: string,\n    {\n        dispatch,\n        state,\n    }: {\n        dispatch: React.Dispatch<SearchActionType>\n        state: AppState\n    },\n    {\n        pushNewHistoryItem = false,\n        searchType,\n        history,\n    }: LoadResultsFromQueryOptions,\n) => {\n    const data = await Cedict.all\n\n    const currentQueryResult = ++queryResultIncrementer\n\n    dispatch({\n        results: null,\n        resultsLoading: true,\n    })\n\n    const searchFn = searchType === 'advanced' ? advancedSearch : basicSearch\n\n    try {\n        const { results } = await searchFn(\n            query,\n            data,\n            Object.entries(state.enabledFuzzyReplacementIds)\n                .filter(([_k, v]) => v)\n                .map(([k, _v]) => k) as FuzzyReplacementId[],\n        )\n\n        if (queryResultIncrementer !== currentQueryResult) {\n            // ignore stale results\n            return\n        }\n\n        setQueryParam('q', query, pushNewHistoryItem, history)\n\n        return dispatch({\n            searchQuery: query,\n            results,\n            resultsLoading: false,\n        })\n    } catch (e) {\n        if (queryResultIncrementer !== currentQueryResult) {\n            // ignore stale results\n            return\n        }\n\n        fireModal({ text: e.message, icon: ErrorOutlineIcon })\n\n        return dispatch({ results: null, resultsLoading: false })\n    }\n}\n\nconst AppContext = React.createContext(\n    initialState as any as {\n        state: AppState\n        dispatch: React.Dispatch<Partial<AppState>>\n    },\n)\n\nconst AppStateProvider: React.FC = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState)\n\n    const value = useMemo(() => ({ state, dispatch }), [state, dispatch])\n\n    return <AppContext.Provider value={value}>{children}</AppContext.Provider>\n}\n\nexport {\n    reducer,\n    initialState,\n    loadResultsFromQuery,\n    AppContext,\n    AppStateProvider,\n}\n","type vowel =\n    | 'a'\n    | 'e'\n    | 'i'\n    | 'o'\n    | 'u'\n    | 'v'\n    | 'A'\n    | 'E'\n    | 'I'\n    | 'O'\n    | 'U'\n    | 'V'\n\nconst toneMarks: { [key in vowel]: string } = {\n    a: 'aāáǎà',\n    e: 'eēéěè',\n    i: 'iīíǐì',\n    o: 'oōóǒò',\n    u: 'uūúǔù',\n    v: 'üǖǘǚǜ',\n    A: 'AĀÁǍÀ',\n    E: 'EĒÉĚÈ',\n    I: 'IĪÍǏÌ',\n    O: 'OŌÓǑÒ',\n    U: 'UŪÚǓÙ',\n    V: 'ÜǕǗǙǛ',\n}\n\nconst normalize = (syl: string) => syl.replace(/u:|v/g, 'ü')\n\nconst addToneMark = (char: vowel | 'ü', tone: number) => {\n    if (tone === 5) tone = 0\n\n    if (char === 'ü') char = 'v'\n\n    return toneMarks[char][tone]\n}\n\nconst isPinyin = (syl: string) => /^[a-hj-tw-z][a-zü:]*\\d?$/i.test(syl)\n\nconst withToneMark = (syl: string) => {\n    const lastChar = syl.slice(-1)[0]\n\n    if (!/\\d/.test(lastChar)) {\n        syl += '5'\n    }\n\n    const tone = +syl.slice(-1)[0]\n\n    return syl\n        .slice(0, -1)\n        .replace(/(?:a|e|o(?=u)|[iouüv](?![aeiouüv]))/i, (m) =>\n            addToneMark(m as vowel | 'ü', tone),\n        )\n}\n\nconst prettifySyl = (syl: string) => {\n    return isPinyin(syl) ? withToneMark(normalize(syl)) : syl\n}\n\nconst prettify = (word: string) =>\n    word.replace(/[a-zü:]+\\d?/gi, (s) => prettifySyl(s))\n\nexport { prettify }\n\n// success\n// prettify('Ni3 you3 nu:3 peng2 you3 ma?');\n// prettify('Ma3 ma3, hu1 hu5 nv5');\n// prettify('mao4 mei4');\n// prettify('xiong1 shi4 ji1 dan4');\n// prettify('lu:e4');\n// prettify('lve4');\n// prettify('lüe4');\n\n// // known issues\n// prettify('high5');\n// prettify('GangOf4');\n\n// \"Nǐ yǒu nǚ péng yǒu ma?\"\n","import React, { useContext } from 'react'\nimport { prettify } from '../lib/pinyinize'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles((theme) => ({\n    root: { marginBottom: '2em' },\n    charGloss: { display: 'flex', flexWrap: 'wrap' },\n    rubyRoot: { fontSize: '2.5em', paddingRight: '0.2em' },\n    defList: { paddingLeft: '1.2em', margin: '0.5em 0' },\n    headwordNoRuby: { fontSize: '2.5em' },\n}))\n\nconst Result: React.FC<{\n    entry: CedictEntry\n    isLast: boolean\n}> = ({ entry, isLast }) => {\n    const classes = useStyles()\n\n    const { state } = useContext(AppContext)\n\n    const { charSet } = state\n\n    const { pinyin, def } = entry\n\n    const currentCharVersion = entry[charSet]\n\n    const chars = Array.from(currentCharVersion)\n    const oppCharTypeName = charSet === 'simp' ? 'trad' : 'simp'\n    const oppCharVersion = entry[oppCharTypeName]\n\n    const pinyinSyls: (string | null)[] = pinyin\n        .split(' ')\n        .map((py) => prettify(py))\n\n    let renderRuby = false\n\n    if (chars.length !== pinyinSyls.length) {\n        process.env.NODE_ENV === 'development' &&\n            console.info('chars.length !== pinyinSyls.length', entry)\n    } else {\n        chars.forEach((char, idx) => {\n            const py = pinyinSyls[idx] as string\n\n            if (py === 'xx') {\n                pinyinSyls[idx] = null\n            } else if (py === char) {\n                // noop\n            } else {\n                renderRuby = true\n            }\n        })\n    }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.charGloss}>\n                {chars.map((char, idx) => {\n                    if (!renderRuby) {\n                        return (\n                            <span key={idx} className={classes.headwordNoRuby}>\n                                {char}\n                            </span>\n                        )\n                    }\n\n                    return (\n                        <ruby key={idx} className={classes.rubyRoot}>\n                            {char}\n                            <rp>(</rp>\n                            <rt>{pinyinSyls[idx] || '\\xa0'}</rt>\n                            <rp>)</rp>\n                        </ruby>\n                    )\n                })}\n            </div>\n            {oppCharVersion !== currentCharVersion && (\n                <div>\n                    {oppCharTypeName[0].toUpperCase() +\n                        oppCharTypeName.slice(1)}\n                    : {oppCharVersion}\n                </div>\n            )}\n            <div>\n                <ul className={classes.defList}>\n                    {def.split(/\\s*[/;]\\s*/).map((item, idx) => (\n                        <li key={idx}>{item}</li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nexport default Result\n\n// {\n//     ;`${index}. ${chars} [${prettify(pinyin)}]\\n${\n// }\n","import { useState } from 'react'\n\nlet idx = 0\n\nconst useHtmlId = (prefix = 'id') => {\n    const [htmlId /* , setHtmlId */] = useState(`${prefix}-${++idx}`)\n\n    return htmlId\n}\n\nexport { useHtmlId }\n","import { PAGE_TITLE, TITLE_DELIMITER } from '../config'\n\nconst setTitle = (newTitle: string | string[]) => {\n    const titleSegments = typeof newTitle === 'string' ? [newTitle] : newTitle\n\n    const title = [...titleSegments, PAGE_TITLE].join(TITLE_DELIMITER)\n\n    document.title = title\n}\n\nexport { setTitle }\n","import React, { useContext } from 'react'\nimport { CircularProgress, makeStyles } from '@material-ui/core'\nimport HelpIcon from '@material-ui/icons/Help'\n\nimport Pagination from '@material-ui/lab/Pagination'\n\nimport Result from '../components/Result'\nimport { AppContext } from '../state/Context'\nimport { setQueryParam } from '../lib/queryParams'\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { useHistory } from 'react-router-dom'\nimport { setTitle } from '../lib/setTitle'\nimport { truncate, toLocaleString } from '../lib/formatters'\nimport { RESULTS_PER_PAGE, TITLE_SEGMENT_TRUNCATE_LENGTH } from '../config'\nimport Link from './Link'\n\nconst ResultsList: React.FC<{ page: number; results: CedictEntry[] }> = ({\n    results,\n    page,\n}) => {\n    return (\n        <>\n            {results\n                .slice((page - 1) * RESULTS_PER_PAGE, page * RESULTS_PER_PAGE)\n                .map((result, idx) => {\n                    return (\n                        <Result\n                            key={idx}\n                            entry={result}\n                            isLast={idx === results.length - 1}\n                        />\n                    )\n                })}\n        </>\n    )\n}\n\nconst useStyles = makeStyles((theme) => ({\n    loaderOuter: {\n        marginTop: '2em',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    loaderInner: {\n        zoom: 1.2,\n    },\n    resultsOuter: {\n        margin: '1.5em 0',\n        display: 'flex',\n    },\n    resultsTotalDisplay: {\n        padding: '0 20px',\n    },\n    halfWidthHr: {\n        flexGrow: 1,\n        height: 0,\n    },\n    helpLinkContainer: {\n        padding: '.6em',\n    },\n    helpLink: {\n        display: 'flex',\n        alignItems: 'ce\tnter',\n        color: `${theme.palette.secondary.main} !important`,\n    },\n    helpIcon: {\n        paddingRight: '.1em',\n        fontSize: '1.1em',\n    },\n}))\n\nconst ResultsDisplay: React.FC = () => {\n    const { state, dispatch } = useContext(AppContext)\n\n    const {\n        loaderOuter,\n        loaderInner,\n        resultsOuter,\n        resultsTotalDisplay,\n        halfWidthHr,\n        helpLinkContainer,\n        helpLink,\n        helpIcon,\n    } = useStyles()\n\n    const history = useHistory()\n\n    const outputId = useHtmlId('output')\n\n    const {\n        results,\n        resultsLoading,\n        page: _page,\n        searchQuery,\n        searchType,\n    } = state\n\n    const page = _page || 1\n\n    if (results && !resultsLoading) {\n        setTitle(\n            [\n                truncate(TITLE_SEGMENT_TRUNCATE_LENGTH)(searchQuery),\n                page > 1 ? `page ${page}` : '',\n                searchType === 'advanced' ? 'Advanced Search' : 'Search',\n            ].filter(Boolean),\n        )\n    }\n\n    return (\n        <>\n            {!resultsLoading && !results && searchType === 'advanced' && (\n                <div className={helpLinkContainer}>\n                    <Link\n                        to='/instructions#advanced-search'\n                        className={helpLink}\n                    >\n                        <HelpIcon className={helpIcon} />\n                        Help\n                    </Link>\n                </div>\n            )}\n            <output id={outputId} className='output'>\n                {resultsLoading ? (\n                    <div className={loaderOuter}>\n                        <CircularProgress\n                            className={loaderInner}\n                            color='primary'\n                        />\n                    </div>\n                ) : (\n                    results && (\n                        <>\n                            <div className={resultsOuter}>\n                                <hr className={halfWidthHr} />\n                                <div className={resultsTotalDisplay}>\n                                    <strong>\n                                        {toLocaleString('en-US')(\n                                            results.length,\n                                        )}\n                                    </strong>{' '}\n                                    <span>\n                                        {results.length === 1\n                                            ? 'result'\n                                            : 'results'}\n                                    </span>\n                                </div>\n                                <hr className={halfWidthHr} />\n                            </div>\n                            {results.length > 0 && (\n                                <ResultsList page={page} results={results} />\n                            )}\n\n                            <Pagination\n                                page={page}\n                                onChange={(_e: any, n: number) => {\n                                    dispatch({ page: n })\n\n                                    setQueryParam(\n                                        'page',\n                                        n.toString(),\n                                        true,\n                                        history,\n                                    )\n\n                                    window.scrollTo(0, 0)\n                                }}\n                                count={Math.floor(\n                                    results.length / RESULTS_PER_PAGE,\n                                )}\n                            />\n                        </>\n                    )\n                )}\n            </output>\n        </>\n    )\n}\n\nexport default ResultsDisplay\n","import React, { useContext } from 'react'\nimport SearchIcon from '@material-ui/icons/Search'\n\nimport {\n    FormControl,\n    InputLabel,\n    FilledInput,\n    InputAdornment,\n    Tooltip,\n    IconButton,\n    makeStyles,\n} from '@material-ui/core'\n\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles((_theme) => ({\n    root: { margin: '1em 0' },\n    inputField: {\n        paddingRight: '3em',\n    },\n    searchButton: {\n        position: 'absolute',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        right: 0,\n        marginRight: 6,\n    },\n}))\n\nconst BasicSearch: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const { root, inputField, searchButton } = useStyles()\n\n    const { pendingSearchQuery } = state\n\n    const searchConditionsId = useHtmlId('search-conditions')\n\n    return (\n        <FormControl className={root} fullWidth variant='filled'>\n            <InputLabel htmlFor={searchConditionsId}>Search terms</InputLabel>\n            <FilledInput\n                id={searchConditionsId}\n                value={pendingSearchQuery}\n                onChange={(e) => {\n                    dispatch({\n                        pendingSearchQuery: e.currentTarget.value,\n                    })\n                }}\n                className={inputField}\n                autoComplete='off'\n                autoCorrect='off'\n                autoCapitalize='off'\n                spellCheck='false'\n                name='search-conditions'\n                placeholder='Enter search terms'\n                endAdornment={\n                    <InputAdornment position='end'>\n                        <Tooltip placement='left' title='Search' arrow>\n                            <IconButton\n                                type='submit'\n                                aria-label='Search'\n                                className={searchButton}\n                            >\n                                <SearchIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </InputAdornment>\n                }\n            />\n        </FormControl>\n    )\n}\n\nexport default BasicSearch\n","import React, { useContext } from 'react'\nimport SearchIcon from '@material-ui/icons/Search'\n\nimport {\n    FormControl,\n    InputLabel,\n    FilledInput,\n    InputAdornment,\n    Tooltip,\n    IconButton,\n    makeStyles,\n} from '@material-ui/core'\n\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles((_theme) => ({\n    root: { margin: '1em 0' },\n    label: {\n        fontFamily:\n            'monospace, \"Noto Sans CJK SC\", \"Noto Sans CJK TC\", \"Microsoft YaHei\"',\n    },\n    inputField: {\n        fontFamily:\n            'monospace, \"Noto Sans CJK SC\", \"Noto Sans CJK TC\", \"Microsoft YaHei\"',\n        paddingRight: '3em',\n    },\n    searchButton: {\n        position: 'absolute',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        right: 0,\n        marginRight: 6,\n    },\n}))\n\nconst AdvancedSearch: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const { root, label, inputField, searchButton } = useStyles()\n\n    const { pendingSearchQuery } = state\n\n    const searchConditionsId = useHtmlId('search-conditions')\n\n    return (\n        <FormControl className={root} fullWidth variant='filled'>\n            <InputLabel className={label} htmlFor={searchConditionsId}>\n                Search query\n            </InputLabel>\n            <FilledInput\n                id={searchConditionsId}\n                className={inputField}\n                value={pendingSearchQuery}\n                onChange={(e) => {\n                    dispatch({\n                        pendingSearchQuery: e.currentTarget.value,\n                    })\n                }}\n                multiline\n                autoComplete='off'\n                autoCorrect='off'\n                autoCapitalize='off'\n                spellCheck='false'\n                name='search-conditions'\n                placeholder='Enter query'\n                endAdornment={\n                    <>\n                        <InputAdornment position='end'>\n                            <Tooltip placement='left' title='Search' arrow>\n                                <IconButton\n                                    type='submit'\n                                    aria-label='Search'\n                                    className={searchButton}\n                                >\n                                    <SearchIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </InputAdornment>\n                    </>\n                }\n            />\n        </FormControl>\n    )\n}\n\nexport default AdvancedSearch\n","import React, { useContext } from 'react'\nimport { Tabs, Tab } from '@material-ui/core'\nimport { AppContext, loadResultsFromQuery } from '../state/Context'\nimport { deleteQueryParam } from '../lib/queryParams'\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport BasicSearch from './BasicSearch'\nimport AdvancedSearch from './AdvancedSearch'\nimport { useHistory } from 'react-router-dom'\n\nconst TabPanel: React.FC<{\n    id: string\n    active: boolean\n    labelledBy: string\n}> = ({ children, id, active, labelledBy }) => {\n    return (\n        <div id={id} hidden={!active} aria-labelledby={labelledBy}>\n            {children}\n        </div>\n    )\n}\n\nconst SearchForm: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const history = useHistory()\n\n    const { pendingSearchQuery, searchType } = state\n\n    const searchFormId = useHtmlId('search-form')\n\n    const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault()\n\n        loadResultsFromQuery(\n            pendingSearchQuery,\n            { dispatch, state },\n            {\n                pushNewHistoryItem: true,\n                searchType,\n                history,\n            },\n        )\n\n        deleteQueryParam('page', false, history)\n\n        dispatch({ page: null })\n    }\n\n    const basicSearchTabId = useHtmlId('basic-search-tab')\n    const advancedSearchTabId = useHtmlId('advanced-search-tab')\n    const basicSearchPanelId = useHtmlId('basic-search-panel')\n    const advancedSearchPanelId = useHtmlId('advanced-search-panel')\n\n    return (\n        <form\n            id={searchFormId}\n            style={{ marginTop: '1em' }}\n            onSubmit={submitForm}\n        >\n            <Tabs\n                indicatorColor='primary'\n                value={searchType}\n                onChange={(_e, newVal) => {\n                    if (newVal !== state.searchType) {\n                        dispatch({ searchType: newVal })\n\n                        history.push(\n                            process.env.PUBLIC_URL +\n                                (newVal === 'advanced'\n                                    ? '/search/advanced'\n                                    : '/search/basic'),\n                        )\n                    }\n                }}\n                aria-label='Search type'\n            >\n                <Tab\n                    id={basicSearchTabId}\n                    label='Basic'\n                    value='basic'\n                    aria-controls={basicSearchPanelId}\n                />\n                <Tab\n                    id={advancedSearchTabId}\n                    label='Advanced'\n                    value='advanced'\n                    aria-controls={advancedSearchPanelId}\n                />\n            </Tabs>\n            <TabPanel\n                id={basicSearchPanelId}\n                active={searchType === 'basic'}\n                labelledBy={basicSearchTabId}\n            >\n                <BasicSearch />\n            </TabPanel>\n            <TabPanel\n                id={advancedSearchPanelId}\n                active={searchType === 'advanced'}\n                labelledBy={advancedSearchTabId}\n            >\n                <AdvancedSearch />\n            </TabPanel>\n        </form>\n    )\n}\n\nexport default SearchForm\n","import React, { useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { Typography } from '@material-ui/core'\nimport { deleteQueryParam, getQueryParam } from '../lib/queryParams'\nimport Cedict from '../repositories/cedict'\nimport { NoDataError } from '../lib/errors'\nimport ResultsDisplay from '../components/ResultsDisplay'\nimport SearchForm from '../components/SearchForm'\nimport { AppContext, loadResultsFromQuery } from '../state/Context'\nimport { setTitle } from '../lib/setTitle'\nimport { xor } from '../lib/utils'\n\nconst SearchPage: React.FC<{\n    searchType: 'basic' | 'advanced'\n    title: string\n}> = ({ searchType, title }) => {\n    setTitle(title)\n\n    const { state, dispatch } = useContext(AppContext)\n\n    const history = useHistory()\n\n    const { error } = state\n\n    const handleQueryParams = () => {\n        try {\n            if (\n                xor(\n                    searchType === 'advanced',\n                    window.location.pathname.split('/').includes('advanced'),\n                )\n            ) {\n                // return early if mismatch between search type\n                // and current tab\n\n                return\n            }\n\n            const text = getQueryParam('q')\n            const page = getQueryParam('page') || '1'\n\n            if (text) {\n                dispatch({\n                    pendingSearchQuery: text,\n                    page: +page,\n                })\n\n                loadResultsFromQuery(\n                    text,\n                    { state, dispatch },\n                    { searchType, history },\n                )\n            } else {\n                deleteQueryParam('page', false, history)\n\n                dispatch({\n                    page: null,\n                    pendingSearchQuery: '',\n                    searchQuery: '',\n                    results: null,\n                    resultsLoading: false,\n                })\n            }\n        } catch (e) {\n            deleteQueryParam('q', false, history)\n            deleteQueryParam('page', false, history)\n\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        dispatch({ searchType })\n\n        handleQueryParams()\n\n        window.addEventListener('popstate', handleQueryParams)\n        ;(async () => {\n            try {\n                await Cedict.all\n            } catch (e) {\n                if (e instanceof NoDataError) {\n                    dispatch({ error: e })\n                }\n            }\n\n            dispatch({ cedictDataLoading: false })\n        })()\n\n        return () => window.removeEventListener('popstate', handleQueryParams)\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dispatch, searchType])\n\n    return error && error instanceof NoDataError ? (\n        <>\n            <Typography variant='h4' paragraph component='h2'>\n                No dictionary data loaded\n            </Typography>\n            <div>\n                <Typography variant='body1' paragraph component='p'>\n                    Dictionary data is required to run this app. Please{' '}\n                    <a href={String('') /* current page */}>reload the page</a>{' '}\n                    and try again.\n                </Typography>\n            </div>\n        </>\n    ) : (\n        <>\n            <SearchForm />\n            <ResultsDisplay />\n        </>\n    )\n}\n\nexport default SearchPage\n","export const xor = (...args: boolean[]) =>\n    args.reduce((acc, cur) => acc + Number(cur), 0) === 1\n","import React, { useContext } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Link from '../components/Link'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        color: 'ivory',\n        textAlign: 'center',\n        paddingTop: '3.5em',\n        paddingBottom: '2em',\n    },\n    heading: {\n        fontFamily: 'ZhiMangXing, Roboto',\n    },\n    subtitle: {\n        padding: '0 2em',\n    },\n}))\n\nconst Header = () => {\n    const { root, heading, subtitle } = useStyles()\n\n    const { dispatch } = useContext(AppContext)\n\n    const clearQuery = () =>\n        dispatch({\n            pendingSearchQuery: '',\n            searchQuery: '',\n            results: null,\n            resultsLoading: false,\n        })\n\n    return (\n        <header className={root}>\n            <Typography variant='h1' component='h1' className={heading}>\n                <Link\n                    tabIndex={-1}\n                    to='/'\n                    onClick={clearQuery}\n                    className='unstyled'\n                >\n                    字字不忘\n                </Link>\n            </Typography>\n            <Typography\n                className={subtitle}\n                variant='subtitle2'\n                component='div'\n            >\n                Zi Zi Bu Wang · Chinese Dictionary Lookup\n            </Typography>\n        </header>\n    )\n}\n\nexport default Header\n","import React from 'react'\n\ninterface ErrorInfoObject {\n    componentStack: any\n}\n\ninterface ErrorBoundaryState {\n    error?: Error\n    errorInfo?: ErrorInfoObject\n}\n\nclass ErrorBoundary extends React.Component {\n    constructor(props: any) {\n        super(props)\n\n        const state: ErrorBoundaryState = {\n            error: undefined,\n            errorInfo: undefined,\n        }\n\n        this.state = state\n    }\n\n    componentDidCatch(error: Error, errorInfo: ErrorInfoObject) {\n        this.setState({\n            error: error,\n            errorInfo: errorInfo,\n        })\n    }\n\n    render() {\n        const { error, errorInfo } = this.state as ErrorBoundaryState\n        const { children } = this.props\n\n        if (error) {\n            return (\n                <div>\n                    <h2>Something went wrong.</h2>\n                    <details style={{ whiteSpace: 'pre-wrap' }}>\n                        {error?.toString()}\n                        <br />\n                        {errorInfo?.componentStack}\n                    </details>\n                </div>\n            )\n        }\n        return children\n    }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport ErrorBoundary from '../components/ErrorBoundary'\nimport { Container } from '@material-ui/core'\n\nconst MainSubLayout: React.FC = ({ children }) => {\n    return (\n        <>\n            <Container maxWidth='sm'>\n                <main>\n                    <ErrorBoundary>{children}</ErrorBoundary>\n                </main>\n            </Container>\n        </>\n    )\n}\n\nexport default MainSubLayout\n","import React, { useContext } from 'react'\nimport { makeStyles, IconButton } from '@material-ui/core'\n\nimport Tooltip from '@material-ui/core/Tooltip'\nimport HomeIcon from '@material-ui/icons/Home'\nimport InfoIcon from '@material-ui/icons/Info'\nimport SettingsIcon from '@material-ui/icons/Settings'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport { AppContext } from '../state/Context'\nimport { fade } from '@material-ui/core/styles/colorManipulator'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        zIndex: 1,\n        position: 'fixed',\n        right: 0,\n        top: 0,\n        textAlign: 'right',\n    },\n    listRoot: {\n        listStyleType: 'none',\n        padding: 0,\n    },\n    [theme.breakpoints.up('sm')]: {\n        navItem: {\n            borderRadius: `50% 0 0 50%`,\n        },\n        activeNavItem: {\n            background: fade(theme.palette.primary.main, 0.25),\n            '&:hover': {\n                background: fade(theme.palette.primary.main, 0.35),\n            },\n        },\n    },\n    activeNavItem: {\n        color: theme.palette.primary.main,\n    },\n}))\n\nconst links = [\n    {\n        to: '/',\n        text: 'Home',\n        Icon: HomeIcon,\n        match: '(?:/search/(?:basic|advanced))?',\n    },\n    {\n        to: '/instructions',\n        text: 'Instructions',\n        Icon: InfoIcon,\n        match: '/instructions',\n    },\n    {\n        to: '/settings',\n        text: 'Settings',\n        Icon: SettingsIcon,\n        match: '/settings',\n    },\n]\n\nconst MainNav: React.FC = () => {\n    const classes = useStyles()\n\n    const { dispatch } = useContext(AppContext)\n\n    const location = useLocation()\n\n    const history = useHistory()\n\n    const clearQuery = () =>\n        dispatch({\n            pendingSearchQuery: '',\n            searchQuery: '',\n            results: null,\n            resultsLoading: false,\n        })\n\n    return (\n        <nav className={classes.root}>\n            <ul className={classes.listRoot}>\n                {links.map(({ to, text, Icon, match }, idx) => {\n                    const path = `${process.env.PUBLIC_URL}${to}`\n\n                    const matcher = new RegExp(\n                        `^${process.env.PUBLIC_URL}${match}/?([?#]|$)`,\n                    )\n\n                    const isMatch = matcher.test(location.pathname)\n\n                    return (\n                        <li key={idx}>\n                            <Tooltip placement='left' title={text} arrow>\n                                <IconButton\n                                    className={\n                                        isMatch\n                                            ? [\n                                                  classes.navItem,\n                                                  classes.activeNavItem,\n                                              ].join(' ')\n                                            : classes.navItem\n                                    }\n                                    TouchRippleProps={{\n                                        classes: {\n                                            child: classes.touchRippleChild,\n                                        },\n                                    }}\n                                    role='link'\n                                    onClick={() => {\n                                        clearQuery()\n\n                                        history.push(path)\n                                    }}\n                                    aria-label={text}\n                                >\n                                    <Icon />\n                                </IconButton>\n                            </Tooltip>\n                        </li>\n                    )\n                })}\n            </ul>\n        </nav>\n    )\n}\n\nexport default MainNav\n","import React from 'react'\nimport Header from '../components/Header'\nimport MainSubLayout from './MainSubLayout'\nimport MainNav from '../components/MainNav'\n\nconst MainLayout: React.FC<{ className: string }> = ({\n    children,\n    className,\n}) => {\n    return (\n        <div className={className}>\n            <MainNav />\n            <Header />\n            <MainSubLayout>{children}</MainSubLayout>\n        </div>\n    )\n}\n\nexport default MainLayout\n","import snarkdown from 'snarkdown'\n\nconst slugify = (str: string) =>\n    str\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, ' ')\n        .trim()\n        .replace(/\\s+/g, '-')\n\nexport const snarkdownEnhanced = (md: string) => {\n    const html = md\n        .split(/((?<=^|\\n)```\\r?\\n[\\s\\S]*\\r?\\n```)/)\n        .map((m, i) =>\n            i % 2\n                ? `<pre><code>${m\n                      .split(/\\r?\\n/)\n                      .slice(1, -1)\n                      .join('\\n')}</pre></code>`\n                : m\n                      .split(/(?:\\r?\\n){2,}/)\n                      .map((l) =>\n                          [' ', '\\t', '#', '-', '*', '`', '~'].some((ch) =>\n                              l.startsWith(ch),\n                          )\n                              ? snarkdown(l)\n                              : `<p>${snarkdown(l)}</p>`,\n                      )\n                      .join(''),\n        )\n        .join('')\n\n    const template = document.createElement('template')\n\n    template.innerHTML = html\n\n    const headings = template.content.querySelectorAll('h2, h3, h4, h5, h6')\n\n    headings.forEach((heading) => {\n        if (heading.textContent) {\n            heading.id = slugify(heading.textContent)\n            heading.classList.add('anchored')\n        }\n    })\n\n    return template.innerHTML\n}\n","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport Link from '../components/Link'\n\nimport contentMdUrl from '../content/instructions.md'\nimport { snarkdownEnhanced } from '../lib/snarkdownEnhanced'\nimport { setTitle } from '../lib/setTitle'\n\ninterface Sample {\n    title: string\n    query: string\n}\n\nconst contentPromise = (async () => {\n    const res = await fetch(contentMdUrl, { cache: 'force-cache' })\n    const text = await res.text()\n\n    const [_instructions, _sampleBlock] = text.split('## Samples')\n\n    const _samples = _sampleBlock\n        .replace(/^```.*/gm, '')\n        .trim()\n        .split(/\\r?\\n---\\r?\\n/)\n        .map((el) => el.trim())\n        .map((el) => {\n            const lines = el.split('\\n')\n            const title = lines\n                .filter((l) => l.startsWith('#'))\n                .map((l) => l.replace(/^#\\s*/, ''))\n                .join('\\n')\n\n            const query = lines\n                .filter((l) => !l.startsWith('#') && !/^\\s*$/.test(l))\n                .join('\\n')\n\n            return { title, query }\n        })\n\n    return { _samples, _instructions }\n})()\n\nconst DocsPage: React.FC<{ title: string }> = ({ title }) => {\n    setTitle(title)\n\n    const [instructions, setInstructions] = useState('')\n    const [samples, setSamples] = useState<Sample[]>([])\n\n    const history = useHistory()\n\n    useEffect(() => {\n        ;(async () => {\n            const { _samples, _instructions } = await contentPromise\n\n            setSamples(_samples)\n\n            setInstructions(snarkdownEnhanced(_instructions))\n\n            if (instructions && window.location.hash) {\n                document\n                    .querySelector(window.location.hash)\n                    ?.scrollIntoView(true)\n            }\n        })()\n    }, [instructions])\n\n    return (\n        <>\n            <div\n                dangerouslySetInnerHTML={{ __html: instructions }}\n                onClick={(e) => {\n                    const target = e.target as HTMLAnchorElement\n                    const href = target.getAttribute('href')\n\n                    if (target.nodeName === 'A' && href) {\n                        e.preventDefault()\n\n                        if (\n                            href.startsWith('http') &&\n                            !href.startsWith(window.location.origin)\n                        ) {\n                            window.open(href, '_blank', 'noopener noreferrer')\n                        } else {\n                            history.push(href)\n                        }\n                    } else if (/^H[2-6]$/.test(target.nodeName)) {\n                        window.location.hash = target.id\n                        target.scrollIntoView(true)\n                    }\n                }}\n            />\n            <ul>\n                {samples.map(({ title, query }) => {\n                    const queryString = `?q=${encodeURIComponent(\n                        `# ${title}\\n\\n${query}`,\n                    )}`.replace(/%20/g, '+')\n\n                    return (\n                        <li key={title}>\n                            <Link to={`/search/advanced/${queryString}`}>\n                                {title}\n                            </Link>\n                        </li>\n                    )\n                })}\n            </ul>\n        </>\n    )\n}\n\nexport default DocsPage\n","import React, { useContext } from 'react'\nimport {\n    FormControl,\n    FormLabel,\n    RadioGroup,\n    FormControlLabel,\n    Radio,\n    FormGroup,\n    Checkbox,\n    makeStyles,\n} from '@material-ui/core'\nimport { AppContext } from '../state/Context'\nimport { fuzzyReplacements } from '../lib/makeFuzzyPinyinRegex'\nimport { setTitle } from '../lib/setTitle'\n\nconst useStyles = makeStyles((_theme) => ({\n    formGroup: { padding: '1em 0' },\n}))\n\nconst SettingsPage: React.FC<{ title: string }> = ({ title }) => {\n    setTitle(title)\n\n    const classes = useStyles()\n\n    const { state, dispatch } = useContext(AppContext)\n\n    const { charSet, enabledFuzzyReplacementIds } = state\n\n    return (\n        <>\n            <h1>Settings</h1>\n            <form onSubmit={(e) => e.preventDefault()}>\n                <FormGroup className={classes.formGroup}>\n                    <FormControl component='fieldset'>\n                        <FormLabel component='legend'>\n                            Default character set\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='Default character set'\n                            name='character-set'\n                            value={charSet}\n                            onChange={(e) => {\n                                const charSet = e.currentTarget.value as\n                                    | 'trad'\n                                    | 'simp'\n\n                                localStorage.setItem('charSet', charSet)\n\n                                dispatch({ charSet })\n                            }}\n                        >\n                            <FormControlLabel\n                                value='simp'\n                                control={<Radio />}\n                                label='简 Simplified'\n                            />\n                            <FormControlLabel\n                                value='trad'\n                                control={<Radio />}\n                                label='繁 Traditional'\n                            />\n                        </RadioGroup>\n                    </FormControl>\n                </FormGroup>\n\n                <FormGroup className={classes.formGroup}>\n                    <FormControl component='fieldset'>\n                        <FormLabel component='legend'>Fuzzy pinyin</FormLabel>\n                        <FormGroup>\n                            {fuzzyReplacements.map(({ name, id }) => {\n                                return (\n                                    <FormControlLabel\n                                        key={id}\n                                        control={\n                                            <Checkbox\n                                                checked={\n                                                    enabledFuzzyReplacementIds[\n                                                        id\n                                                    ] || false\n                                                }\n                                                onChange={(e) => {\n                                                    enabledFuzzyReplacementIds[\n                                                        id\n                                                    ] = e.currentTarget.checked\n\n                                                    dispatch({\n                                                        enabledFuzzyReplacementIds,\n                                                    })\n\n                                                    localStorage.setItem(\n                                                        'enabledFuzzyReplacementIds',\n                                                        JSON.stringify(\n                                                            enabledFuzzyReplacementIds,\n                                                        ),\n                                                    )\n                                                }}\n                                                name={id}\n                                            />\n                                        }\n                                        label={name}\n                                    />\n                                )\n                            })}\n                        </FormGroup>\n                    </FormControl>\n                </FormGroup>\n            </form>\n        </>\n    )\n}\n\nexport default SettingsPage\n","import React, { useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { v4 as uuidv4 } from 'uuid'\n\ninterface StaticAnalyticsProps {\n    _version: '1'\n    correlationId: string\n}\n\ntype EventType = 'route' | 'load' | 'unload'\n\ntype Analytics = StaticAnalyticsProps & {\n    event: EventType\n}\n\nconst analyticsUrl = `${process.env.REACT_APP__API_URL}/analytics`\n\nconst correlationId = sessionStorage.getItem('correlationId') ?? uuidv4()\nsessionStorage.setItem('correlationId', correlationId)\n\nconst _version = '1'\n\nconst staticProps: StaticAnalyticsProps = {\n    _version,\n    correlationId,\n}\n\nconst createLog = (event: EventType) => {\n    const msg: Analytics = { ...staticProps, event }\n\n    return JSON.stringify(msg)\n}\n\nconst onUnload = (_e: Event) => {\n    if (process.env.NODE_ENV !== 'production') return\n\n    navigator.sendBeacon(analyticsUrl, createLog('unload'))\n}\n\nlet prevPathAndQuery: string | null = null\n\nconst RouteAnalytics: React.FC = () => {\n    const history = useHistory()\n\n    useEffect(() => {\n        if (process.env.NODE_ENV !== 'production') return\n\n        fetch(analyticsUrl, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: createLog('load'),\n        })\n\n        window.onbeforeunload = onUnload\n\n        return () => {\n            window.removeEventListener('beforeunload', onUnload)\n        }\n    }, [])\n\n    history.listen(({ pathname, search }) => {\n        if (process.env.NODE_ENV !== 'production') return\n\n        const thisPathAndQuery = pathname + search\n\n        if (thisPathAndQuery === prevPathAndQuery) return\n\n        prevPathAndQuery = thisPathAndQuery\n\n        fetch(analyticsUrl, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: createLog('route'),\n        })\n    })\n\n    return null\n}\n\nexport default RouteAnalytics\n","import React, { useRef } from 'react'\n\nimport SearchPage from './pages/SearchPage'\nimport MainLayout from './layouts/MainLayout'\n\nimport {\n    BrowserRouter as Router,\n    Route,\n    useHistory,\n    Redirect,\n} from 'react-router-dom'\n\nimport DocsPage from './pages/DocsPage'\nimport SettingsPage from './pages/SettingsPage'\nimport makeStyles from '@material-ui/core/styles/makeStyles'\nimport RouteAnalytics from './components/RouteAnalytics'\n\nconst useStyles = makeStyles((_theme) => ({\n    focusOnRouteChange: { outline: 'none' },\n}))\n\nlet prevPathName: string | null = null\n\nconst FocusOnRouteChange: React.FC = ({ children }) => {\n    const history = useHistory()\n\n    const { focusOnRouteChange } = useStyles()\n\n    const ref = useRef<HTMLDivElement>(null)\n\n    history.listen(({ pathname }) => {\n        // don't refocus if only the query params/hash have changed\n        if (pathname !== prevPathName) {\n            ref.current?.focus()\n\n            // prevent jank when focusing causes page to scroll\n            window.scrollTo(0, 0)\n\n            prevPathName = pathname\n        }\n    })\n\n    return (\n        <div ref={ref} tabIndex={-1} className={focusOnRouteChange}>\n            {children}\n        </div>\n    )\n}\n/**\n * Redirects preserving query string, hash, etc.\n */\nconst RedirectPathname: React.FC<{ from: string; to: string }> = ({\n    from,\n    to,\n}) => {\n    return (\n        <Route\n            exact\n            path={from}\n            render={() => (\n                <Redirect to={{ ...window.location, pathname: to }} />\n            )}\n        />\n    )\n}\n\nconst AppRouter: React.FC = () => {\n    return (\n        <Router basename={process.env.PUBLIC_URL}>\n            <Route path='/'>\n                <MainLayout className='content-container'>\n                    <RouteAnalytics />\n                    <RedirectPathname from='/' to='/search/basic' />\n                    <RedirectPathname from='/advanced' to='/search/advanced' />\n                    <FocusOnRouteChange>\n                        <Route exact path='/search/basic'>\n                            <SearchPage title='Search' searchType='basic' />\n                        </Route>\n                        <Route exact path='/search/advanced'>\n                            <SearchPage\n                                title='Advanced Search'\n                                searchType='advanced'\n                            />\n                        </Route>\n                        <Route exact path='/instructions'>\n                            <DocsPage title='Instructions' />\n                        </Route>\n                        <Route exact path='/settings'>\n                            <SettingsPage title='Settings' />\n                        </Route>\n                    </FocusOnRouteChange>\n                </MainLayout>\n            </Route>\n        </Router>\n    )\n}\n\nexport default AppRouter\n","import React from 'react'\nimport ZhiMangXing from '../assets/ZhiMangXing-Regular-subset.ttf'\nimport { makeStyles } from '@material-ui/core'\n\nconst useGlobalStyles = makeStyles((theme) => ({\n    '@global': {\n        '@font-face': {\n            fontFamily: 'ZhiMangXing',\n            src: `url(${ZhiMangXing})`,\n        },\n\n        /**\n         * Scrollbars\n         */\n\n        // chrome, safari, chromium-edge\n        '::-webkit-scrollbar': { background: '#000' },\n        '::-webkit-scrollbar-thumb': {\n            background: 'rgba(255, 255, 255, 0.5)',\n            borderColor: 'black',\n            borderStyle: 'solid',\n            borderRadius: 5,\n        },\n\n        // firefox\n        '*': { scrollbarColor: '#808080 black', scrollbarWidth: 'thin' },\n\n        /**\n         * General\n         */\n\n        body: {\n            background: '#111',\n            color: '#eee',\n            margin: '0',\n            fontFamily:\n                '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", \"Noto Sans CJK SC\", \"Noto Sans CJK TC\",\"Microsoft YaHei\", sans-serif',\n            WebkitFontSmoothing: 'antialiased',\n            MozOsxFontSmoothing: 'grayscale',\n            overflowY: 'scroll !important',\n        },\n\n        '.everything-container': {\n            minHeight: 'calc(var(--vh, 1vh) * 100)',\n            display: 'flex',\n            flexDirection: 'column',\n            marginRight: '2em',\n        },\n        '.content-container': { flex: '1 0 auto' },\n        '.footer-container': { flexShrink: '0' },\n\n        hr: { opacity: '0.3' },\n\n        [theme.breakpoints.down('xs')]: {\n            header: {\n                paddingBottom: '1em !important',\n                '& h1': {\n                    fontSize: '3.5em !important',\n                },\n            },\n        },\n\n        /**\n         * Code\n         */\n\n        pre: {\n            padding: 5,\n            whiteSpace: 'pre-wrap',\n            backgroundColor: 'rgba(151, 96, 128, 0.1)',\n        },\n\n        ':not(pre) > code': {\n            padding: '1px 3px',\n            color: theme.palette.secondary.main,\n            backgroundColor: 'rgba(151, 96, 128, 0.1)',\n            borderRadius: 4,\n        },\n\n        kbd: {\n            color: '#fff',\n            backgroundColor: '#333',\n            borderRadius: 3,\n            border: '1px solid #222',\n            boxShadow:\n                '0 1px 1px rgba(0, 0, 0, 0.2), 1px 1px 0 0 rgba(70, 70, 70, 0.7) inset',\n            display: 'inline-block',\n            lineHeight: '1',\n            padding: '4px 6px',\n            whiteSpace: 'nowrap',\n        },\n\n        /**\n         * Links\n         */\n\n        'a[href]': {\n            color: theme.palette.primary.main,\n            textDecoration: 'none',\n        },\n\n        'a[href]:hover': { textDecoration: 'underline' },\n\n        '.unstyled': {\n            textDecoration: 'none !important',\n            color: 'inherit !important',\n        },\n\n        [`a[href^=\"http\"]:not([href^=\"${window.location.origin}\"])::after`]: {\n            content: '\"\"',\n            backgroundImage: ((color) =>\n                `url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"100px\" width=\"100px\" fill=\"${color}\" viewBox=\"0 0 82 81\" version=\"1.1\" x=\"0px\" y=\"0px\"><title>Group</title><desc>Created with Sketch.</desc><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(0.000000, -17.000000)\"><path d=\"M65.0787075,33.0882353 L33.4558824,64.3382354\" stroke=\"${color}\" stroke-width=\"15\" stroke-linecap=\"square\"></path><polygon fill=\"${color}\" transform=\"translate(72.134903, 29.456845) rotate(53.000000) translate(-72.134903, -29.456845) \" points=\"68.5556866 14.7245467 97.9172862 36.850099 46.3525203 44.1891435\"></polygon><polygon fill=\"${color}\" points=\"48.5294118 28.6764706 0 28.6764706 0 97.7941176 69.1176471 97.7941176 69.1176471 50 58.0882353 61.0294118 58.0882353 86.7647059 11.0294118 86.7647059 11.0294118 39.7058824 37.5 39.7058824\"></polygon></g></g></svg>')`)(\n                encodeURIComponent(theme.palette.primary.main),\n            ),\n            padding: '0 .34em',\n            backgroundSize: '.7em',\n            opacity: 0.7,\n            margin: '0 .1em 0 .2em',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0 .25em',\n        },\n\n        '.anchored': {\n            position: 'relative',\n            paddingTop: '0.8em',\n            marginTop: '-0.4em',\n        },\n\n        [theme.breakpoints.up('md')]: {\n            '.anchored:hover::before': {\n                content: '\"§\"',\n                position: 'absolute',\n                left: '-1em',\n                opacity: 0.7,\n                fontWeight: 'normal',\n            },\n        },\n\n        /**\n         * MUI overrides\n         */\n\n        '@media (hover: none)': {\n            // MUI default degrades usability on touch devices\n            '.MuiPaginationItem-page.Mui-selected:hover, .MuiPaginationItem-page.Mui-selected.Mui-focusVisible':\n                {\n                    backgroundColor: theme.palette.action.selected,\n                },\n        },\n    },\n}))\n\nconst GlobalStyles: React.FC = () => {\n    useGlobalStyles()\n\n    return null\n}\n\nexport default GlobalStyles\n","import './lib/viewportHeightAdjuster'\n\nimport React from 'react'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport { theme } from './lib/theme'\n\nimport PageBackground from './components/PageBackground'\n\nimport { Container } from '@material-ui/core'\nimport Footer from './components/Footer'\nimport { AppStateProvider } from './state/Context'\nimport ModalContainer from 'react-modal-promise'\nimport AppRouter from './AppRouter'\nimport GlobalStyles from './layouts/GlobalStyles'\n\nconst App: React.FC = () => {\n    return (\n        // TODO - re-enable StrictMode (dependant on MUI https://github.com/mui-org/material-ui/issues/13394)\n        // <React.StrictMode>\n        <AppStateProvider>\n            <ThemeProvider theme={theme}>\n                <GlobalStyles />\n                <ModalContainer />\n                <PageBackground />\n                <div className='everything-container'>\n                    <AppRouter />\n                    <Container className='footer-container' maxWidth='sm'>\n                        <Footer />\n                    </Container>\n                </div>\n            </ThemeProvider>\n        </AppStateProvider>\n        // </React.StrictMode>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n        ),\n)\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.info(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA',\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.info(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.info('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.info(\n                'No internet connection found. App is running in offline mode.',\n            )\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister()\n            })\n            .catch((error) => {\n                console.error(error.message)\n            })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { exposeDebugVars } from './debug'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n\nexposeDebugVars()\n","import { openDB, deleteDB } from 'idb'\nimport { prettify } from './lib/pinyinize'\nimport { seedDb, Cedict, db } from './repositories/cedict'\n\nexport function exposeDebugVars() {\n\tconst _window = window as any\n\n\tCedict.all.then(x => _window.cedict = x)\n\t_window.prettify = prettify\n\n\tif (process.env.NODE_ENV === 'development') {\n\t\t_window.deleteDB = deleteDB\n\t\t_window.openDB = openDB\n\t\t_window.seedDb = seedDb\n\t\t_window.db = db\n\t}\n}\n"],"sourceRoot":""}