(this.webpackJsonpzizibuwang=this.webpackJsonpzizibuwang||[]).push([[0],{45:function(e,t,n){e.exports=n.p+"static/media/cc-cedict.02fc0569.tsv"},50:function(e,t,n){e.exports=n.p+"static/media/ZhiMangXing-Regular-subset.c382153c.ttf"},53:function(e){e.exports=JSON.parse("1582933903995")},62:function(e,t,n){e.exports=n(72)},67:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(67),n(105)),s=n(73),u=n(103),l=n(104),f=n(50),d=n.n(f),m=document.createElement("style");m.innerHTML="\n    @font-face {\n        font-family: 'ZhiMangXing';\n        src: url(".concat(d.a,");\n    }\n"),document.head.appendChild(m);var p=n(55),h=Object(p.a)({palette:{common:{black:"#000",white:"#fff"},type:"dark",primary:{main:"#357",light:"rgb(91,119,146)",dark:"rgb(35,59,83)",contrastText:"#fff"},secondary:{main:"#26c6dd",light:"rgb(81,209,227)",dark:"rgb(26,138,154)",contrastText:"rgba(0,0,0,0.87)"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},warning:{light:"#ffb74d",main:"#ff9800",dark:"#f57c00",contrastText:"rgba(0,0,0,0.87)"},info:{light:"#64b5f6",main:"#2196f3",dark:"#1976d2",contrastText:"#fff"},success:{light:"#81c784",main:"#4caf50",dark:"#388e3c",contrastText:"rgba(0,0,0,0.87)"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"#fff",secondary:"rgba(255,255,255,0.7)",disabled:"rgba(255,255,255,0.5)",hint:"rgba(255,255,255,0.5)"},divider:"rgba(255,255,255,0.12)",background:{paper:"#424242",default:"#121212"},action:{active:"#fff",hover:"rgba(255,255,255,0.08)",hoverOpacity:.08,selected:"rgba(255,255,255,0.16)",disabled:"rgba(255,255,255,0.3)",disabledBackground:"rgba(255,255,255,0.12)"}}}),g=function(){return r.a.createElement("header",{style:{color:"antiquewhite",textAlign:"center",padding:"2em"}},r.a.createElement(s.a,{variant:"h1",component:"h1"},"\u5b57\u5b57\u4e0d\u5fd8"))},b=function(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",position:"fixed",background:"linear-gradient(180deg, #111, #022)",zIndex:-1}})},v=n(10),E=n.n(v),w=n(13),x=n(26),y=["# traditional identical to simplified\n\ntrad sameas simp\ntrad minlength 2\ntrad !match \\P{Script=Han}","# \u4e0d...\u4e0d pattern with syllable li3 or li4\n\nsimp match \u4e0d.\u4e0d\nsimp length 4\npinyin imatch \\bli[34]","# fuzzy match on xian2 xiao4\n\npinyin imatch ^(?:sh?[ea]|xia)ng?[12] xiao4$","# fuzzy match on xiao4 er2 bu4 yu3\n\npinyin imatch ^(?:xi|sh)ao4 er2 bu4 y[ui][23]$","# \u73ed\u95e8\u5f04\u65a7\n\npinyin icontains ban1\nsimp contains \u65a7\nsimp length 4","# triplicate characters\n\nsimp match (.)\\1\\1","# \u8bf4\u66f9\u64cd\u2026\u2026\n\nsimp match (..)\uff0c\\1"],F=n(52),k=function(e){var t=Object(F.a)(e),n=t[0];return t.slice(1).map((function(e){var t={};return n.forEach((function(n,a){return t[n]=e[a]})),t}))},j={DB_VERSION:n(53),MAX_TIMEOUT:3e3,DB_NAME:"dict_data",CEDICT_TABLE_NAME:"cedict"},O=n(56),S=n(40),A=n.n(S),C=n(45),T=n.n(C),z=n(27),I=n(30),D=n(21),B=n(28),R=n(42),M=function(e){function t(){return Object(z.a)(this,t),Object(I.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(B.a)(t,e),t}(Object(R.a)(Error)),W=j.DB_NAME,_=j.CEDICT_TABLE_NAME,N=j.DB_VERSION,q=function(){var e=Object(w.a)(E.a.mark((function e(t){var n,a,r,o,c,i,s,u,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=navigator.connection||{}).saveData&&"cellular"!==n.type){e.next=12;break}return e.next=4,fetch(T.a,{method:"HEAD"});case 4:return a=e.sent,r=a.headers.get("content-length"),o=r?"Download ".concat((+r/1e3/1e3).toFixed(1),"\xa0MB?"):"Download data?",e.next=9,A.a.fire({showCancelButton:!0,confirmButtonText:"Download",title:o,text:"This is required the first time you run this app. Consider switching to a Wi-Fi connection.",icon:"question"});case 9:if(e.sent.value){e.next=12;break}throw new M("User declined to download data");case 12:return e.next=14,fetch(T.a);case 14:return c=e.sent,e.next=17,c.text();case 17:return i=e.sent,s=i.trim().split(/\r?\n/).map((function(e){return e.split("\t").map((function(e){return e.trim()}))})),u=k(s),l=t.transaction(_,"readwrite"),l.objectStore(_).put(u,"entries"),localStorage.removeItem("dbRequiresSeeding"),localStorage.setItem("cedictTsvEtag",c.headers.get("etag")||"unknown"),e.abrupt("return");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=new Promise(function(){var e=Object(w.a)(E.a.mark((function e(t,n){var a,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(W,N,{upgrade:function(e,t,n,a){(t||e.createObjectStore(_),t<1582933903995)&&(localStorage.clear(),a.objectStore(_).clear());localStorage.setItem("dbRequiresSeeding","yes")}});case 2:return a=e.sent,r=a.transaction(_),o=r.objectStore(_),e.next=7,o.getKey("entries");case 7:if(e.sent||!localStorage.getItem("dbRequiresSeeding")){e.next=18;break}return e.prev=9,e.next=12,q(a);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error(e.t0),n(e.t0);case 18:t(a);case 19:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}()),U={all:new Promise(function(){var e=Object(w.a)(E.a.mark((function e(t,n){var a,r,o,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P;case 3:return a=e.sent,r=a.transaction(_),o=r.objectStore(_),e.next=8,o.get("entries");case 8:c=e.sent,t(c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),n(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}())},L=n(39),$=n(54),H=j.MAX_TIMEOUT,X=function(){var e=Object(w.a)(E.a.mark((function e(t,n){var a,r,o,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=t.split(/\r?\n/).map((function(e){return e.trim()})).filter((function(e){return e&&!e.startsWith("#")})),console.log(c),1!==c.length||"*"!==c[0]){e.next=7;break}o=[],e.next=12;break;case 7:if(0!==c.length){e.next=11;break}throw new RangeError("Must have at last one condition");case 11:o=c.map(J);case 12:return(i=new Worker("/zizibuwang/search-worker.js")).postMessage({type:"SEARCH",conditions:o,entries:n}),e.next=16,new Promise((function(e,t){i.onmessage=function(n){var a=n.data;"ERROR"===a.type&&t(a.error),i.terminate(),e(a.results)},setTimeout((function(){i.terminate(),t("Timeout exceeded")}),H)}));case 16:r=e.sent,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),a=e.t0;case 22:return e.abrupt("return",{results:r,error:a});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}();function J(e){var t=Object($.a)(/^([\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+([\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(.+)$/,{prop:1,method:2,arg:3}),n=e.match(t);if(!n)throw new SyntaxError('Each condition must be formatted as "subject verb object"');return Object(L.a)({},n.groups)}var V=n(102),Z={a:"a\u0101\xe1\u01ce\xe0",e:"e\u0113\xe9\u011b\xe8",i:"i\u012b\xed\u01d0\xec",o:"o\u014d\xf3\u01d2\xf2",u:"u\u016b\xfa\u01d4\xf9",v:"\xfc\u01d6\u01d8\u01da\u01dc",A:"A\u0100\xc1\u01cd\xc0",E:"E\u0112\xc9\u011a\xc8",I:"I\u012a\xcd\u01cf\xcc",O:"O\u014c\xd3\u01d1\xd2",U:"U\u016a\xda\u01d3\xd9",V:"\xdc\u01d5\u01d7\u01d9\u01db"},K=function(e){var t=e.slice(-1)[0];/\d/.test(t)||(e+="5");var n=+e.slice(-1)[0];return e.slice(0,-1).replace(/(?:a|e|o(?=u)|[iou\xfcv](?![aeiou\xfcv]))/i,(function(e){return function(e,t){return 5===t&&(t=0),"\xfc"===e&&(e="v"),Z[e][t]}(e,n)}))},Y=function(e){return e.replace(/[a-z\xfc:]+\d?/gi,(function(e){return function(e){return/^[a-z\xfc:]+\d?$/i.test(e)}(t=e)?K(function(e){return e.replace(/u:|v/g,"\xfc")}(t)):t;var t}))},G=function(e){var t=e.results,n=e.resultsLoading;return r.a.createElement("pre",{style:{whiteSpace:"pre-wrap"}},r.a.createElement("output",{className:"output"},n?r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(V.a,{style:{zoom:1.2},color:"secondary"})):t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,t.length)," results\n\n\n"),t.slice(0,100).map((function(e){var t=e.trad,n=e.simp,a=e.pinyin,o=e.def;return r.a.createElement(r.a.Fragment,{key:"".concat(t," ").concat(n," [").concat(a,"]")},"".concat(t," | ").concat(n," [").concat(Y(a),"]\n").concat(o.split(/\s*[/;]\s*/).map((function(e){return"\u2022 ".concat(e)})).join("\n"),"\n\n\n"))})))))},Q=n(108),ee=n(106),te=n(107),ne=function(e){var t=e.submitForm;return r.a.createElement("form",{style:{marginTop:"1em"},onSubmit:t},r.a.createElement(Q.a,{style:{margin:"1em 0"},fullWidth:!0},r.a.createElement(ee.a,{id:"search-conditions",InputProps:{style:{fontFamily:"Consolas, monospace"}},label:"Search query",variant:"filled",multiline:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",name:"search-conditions",placeholder:"Syntax: subject verb object"})),r.a.createElement(Q.a,{style:{margin:"1em 0"}},r.a.createElement(te.a,{type:"submit",variant:"contained",color:"primary"},"Search")))},ae=function(){var e=Object(a.useState)([]),t=Object(x.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(x.a)(c,2),l=i[0],f=i[1],d=Object(a.useState)(!0),m=Object(x.a)(d,2)[1],p=Object(a.useState)(null),h=Object(x.a)(p,2),g=h[0],b=h[1];Object(a.useEffect)((function(){!function(){var e=0|new URLSearchParams(window.location.search).get("preset"),t=e&&y[e-1];t&&(document.querySelector("#search-conditions").textContent=t)}(),Object(w.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.all;case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0 instanceof M&&b(e.t0);case 8:m(!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[]);var v=function(){var e=Object(w.a)(E.a.mark((function e(t){var n,a,r,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o([]),f(!0),n=new FormData(t.currentTarget).get("search-conditions"),e.next=6,U.all;case 6:return a=e.sent,e.next=9,X(n,a);case 9:r=e.sent,c=r.results,(i=r.error)?(A.a.fire({text:i.message,icon:"error"}),f(!1),o([])):(f(!1),o(c));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{variant:"h4",paragraph:!0,component:"h2"},"No dictionary data loaded"),r.a.createElement("div",null,r.a.createElement(s.a,{variant:"body1",paragraph:!0,component:"p"},"Dictionary data is required to run this app. Please"," ",r.a.createElement(u.a,{href:"",onClick:function(){return window.location.reload()}},"reload the page")," ","and try again."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{submitForm:v}),r.a.createElement(G,{results:n,resultsLoading:l}))},re=n(18),oe=function(e){function t(e){var n;Object(z.a)(this,t);var a={error:void 0,errorInfo:void 0};return(n=Object(I.a)(this,Object(D.a)(t).call(this,e))).state=a,n}return Object(B.a)(t,e),Object(re.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.errorInfo,a=this.props.children;return t?r.a.createElement("div",null,r.a.createElement("h2",null,"Something went wrong."),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},null===t||void 0===t?void 0:t.toString(),r.a.createElement("br",null),null===n||void 0===n?void 0:n.componentStack)):a}}]),t}(r.a.Component),ce=function(){return r.a.createElement(l.a,{theme:h},r.a.createElement(b,null),r.a.createElement(g,null),r.a.createElement("main",null,r.a.createElement(i.a,{maxWidth:"sm"},r.a.createElement(oe,null,r.a.createElement(ae,null)))),r.a.createElement("footer",null,r.a.createElement(i.a,{maxWidth:"sm",style:{margin:"2em auto"}},r.a.createElement("hr",{style:{opacity:.3}}),r.a.createElement(s.a,{variant:"body1",component:"p"},"Data from"," ",r.a.createElement(u.a,{target:"_blank",rel:"noopener noreferrer",href:"https://cc-cedict.org/wiki/"},"CC-CEDICT")," ","(",r.a.createElement(u.a,{target:"_blank",rel:"noopener noreferrer",href:"https://creativecommons.org/licenses/by-sa/3.0/"},"CC BY-SA 3.0"),")."))))},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(ce,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/zizibuwang",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/zizibuwang","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):se(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):se(t,e)}))}}()}},[[62,1,2]]]);
//# sourceMappingURL=main.cb9cad61.chunk.js.map