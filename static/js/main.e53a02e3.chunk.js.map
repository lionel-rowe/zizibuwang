{"version":3,"sources":["lib/setup.ts","lib/injectDynamicStyles.ts","lib/logging.ts","lib/theme.ts","components/PageBackground.tsx","components/Link.tsx","components/Footer.tsx","lib/parse-tsv.ts","config.ts","lib/errors.ts","components/Modal.tsx","lib/fireModal.ts","repositories/cedict.ts","lib/pinyinToPartsMapping.ts","lib/permute.ts","lib/makeRegex.ts","lib/search.ts","lib/queryParams.ts","lib/globals.ts","state/Context.tsx","lib/pinyinize.ts","components/Result.tsx","hooks/useHtmlId.ts","lib/setTitle.ts","lib/formatters.ts","components/ResultsDisplay.tsx","components/BasicSearch.tsx","components/AdvancedSearch.tsx","components/SearchForm.tsx","pages/SearchPage.tsx","components/Header.tsx","components/ErrorBoundary.tsx","layouts/MainSubLayout.tsx","components/MainNav.tsx","layouts/MainLayout.tsx","lib/snarkdownPlus.ts","pages/DocsPage.tsx","pages/SettingsPage.tsx","AppRouter.tsx","App.tsx","serviceWorker.js","index.tsx","assets/cc-cedict.tsv","assets/ZhiMangXing-Regular-subset.ttf","assets/pinyin-syllables.tsv","content/instructions.md"],"names":["setVh","vh","window","innerHeight","document","documentElement","style","setProperty","addEventListener","styles","createElement","innerHTML","ZhiMangXing","location","origin","process","head","appendChild","Result","Synchronicity","theme","createMuiTheme","overrides","MuiTooltip","tooltip","color","backgroundColor","arrow","palette","common","black","white","type","primary","main","light","dark","contrastText","secondary","error","warning","info","success","grey","A100","A200","A400","A700","contrastThreshold","tonalOffset","text","disabled","hint","divider","background","paper","default","action","active","hover","hoverOpacity","selected","disabledBackground","width","height","position","zIndex","Link","React","forwardRef","ref","to","children","absolute","external","props","href","target","rel","useStyles","makeStyles","root","margin","Footer","classes","className","Typography","variant","component","rowHeadingsToProps","rows","headers","map","e","obj","forEach","h","i","config","DB_VERSION","MAX_TIMEOUT","DB_NAME","CEDICT_TABLE_NAME","NoDataError","Error","Modal","isOpen","onResolve","title","showCancelButton","icon","confirmButtonText","cancelButtonText","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","disableElevation","onClick","autoFocus","fireModal","createModal","seedDb","db","a","connection","navigator","saveData","fetch","cedictUrl","method","contentLength","get","toFixed","HelpOutlineIcon","res","trim","split","line","cell","entries","tx","transaction","objectStore","put","localStorage","removeItem","setItem","Promise","resolve","reject","openDB","upgrade","oldVersion","_newVersion","createObjectStore","clear","_db","store","getKey","getItem","console","Cedict","all","pinyinToPartsMappingPromise","pinyinSyllablesUrl","txt","sylls","x","initials","pinyinToPartsMapping","Object","create","row","_rowIdx","slice","medial","final","cellIdx","liftA2","f","b","listApply","curry","fs","xs","concat","apply","cons","orderedPermute","arrArr","n","len","Math","min","length","arrIdxs","Array","fill","_","idx","loop","currArrIdxs","arrIdx","__","Symbol","$0","contextMappings","isMatch","matchers","parts","every","matcher","part","RegExp","test","transformParts","replacers","replace","spellPinyin","m","find","k","filter","Boolean","join","fuzzyReplacements","name","alts","str","indexOf","ch","spellValidAltsWith","enabledFuzzyReplacementIds","py","push","r","includes","makeAlts","arr","makeRegexWith","spellValidAlts","segments","toLowerCase","toCondition","clause","matches","match","SyntaxError","groups","query","data","pinyinRegex","searchWorker","Worker","postMessage","RangeError","onmessage","terminate","results","setTimeout","lines","el","startsWith","conditions","fn","basicSearch","advancedSearch","getQueryParam","paramName","URLSearchParams","search","_setAllQueryParams","allQueryParams","pushNewHistoryItem","navigate","newQueryString","from","toString","pathname","setQueryParam","newVal","set","deleteQueryParam","delete","queryResultIncrementer","initialState","charSet","searchQuery","resultsLoading","cedictDataLoading","page","searchType","JSON","parse","reducer","state","v","loadResultsFromQuery","dispatch","currentQueryResult","globals","searchFn","message","ErrorOutlineIcon","AppContext","createContext","AppStateProvider","useReducer","value","useMemo","Provider","toneMarks","o","u","A","E","I","O","U","V","withToneMark","syl","lastChar","tone","char","addToneMark","prettify","word","s","isPinyin","normalize","marginBottom","charGloss","display","flexWrap","rubyRoot","fontSize","paddingRight","defList","paddingLeft","headwordNoRuby","entry","isLast","useContext","pinyin","def","currentCharVersion","chars","oppCharTypeName","oppCharVersion","pinyinSyls","renderRuby","key","toUpperCase","item","useHtmlId","prefix","useState","htmlId","setTitle","newTitle","truncate","overflowFiller","ResultsList","result","ResultsDisplay","useNavigate","outputId","_page","marginTop","justifyContent","CircularProgress","zoom","flexGrow","padding","toLocaleString","Pagination","onChange","_e","scrollTo","count","floor","BasicSearch","searchConditionsId","FormControl","fullWidth","InputLabel","htmlFor","FilledInput","currentTarget","autoComplete","autoCorrect","autoCapitalize","spellCheck","placeholder","endAdornment","InputAdornment","Tooltip","placement","IconButton","aria-label","top","transform","right","marginRight","AdvancedSearch","fontFamily","multiline","role","TabPanel","labelledBy","hidden","SearchForm","searchFormId","submitForm","preventDefault","basicSearchTabId","advancedSearchTabId","basicSearchPanelId","advancedSearchPanelId","onSubmit","Tabs","indicatorColor","Tab","label","aria-controls","SearchPage","handleQueryParams","Number","useEffect","removeEventListener","paragraph","String","textAlign","paddingTop","paddingBottom","heading","subtitle","Header","tabIndex","ErrorBoundary","undefined","errorInfo","this","setState","whiteSpace","componentStack","Component","MainSubLayout","Container","maxWidth","listRoot","listStyleType","breakpoints","up","navItem","borderRadius","activeNavItem","fade","touchRippleChild","down","links","Icon","HomeIcon","InfoIcon","SettingsIcon","MainNav","useLocation","path","TouchRippleProps","child","MainLayout","snarkdownPlus","md","l","snarkdown","contentPromise","contentMdUrl","cache","_instructions","_sampleBlock","_samples","DocsPage","instructions","setInstructions","samples","setSamples","hash","querySelector","scrollIntoView","dangerouslySetInnerHTML","__html","queryString","encodeURIComponent","_theme","formGroup","SettingsPage","FormGroup","FormLabel","RadioGroup","FormControlLabel","control","Radio","Checkbox","checked","stringify","AppRouter","basepath","App","ThemeProvider","PageBackground","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","getElementById","URL","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.e53a02e3.chunk.js","sourcesContent":["export {}\n\nconst setVh = () => {\n    const vh = window.innerHeight * 0.01\n    document.documentElement.style.setProperty('--vh', `${vh}px`)\n}\n\nwindow.addEventListener('resize', setVh)\n\nsetVh()\n","import ZhiMangXing from '../assets/ZhiMangXing-Regular-subset.ttf'\n\nconst styles = document.createElement('style')\n\nstyles.innerHTML = `\n    @font-face {\n        font-family: 'ZhiMangXing';\n        src: url(${ZhiMangXing});\n\t}\n\n\ta[href^=\"http\"]:not([href^=\"${window.location.origin}\"])::after {\n\t\tcontent: \"\";\n\t\tbackground-image: url(\"${process.env.PUBLIC_URL}/external-link-icon.svg\");\n\t\tpadding: 0 .34em;\n\t\tbackground-size: .7em;\n\t\topacity: .7;\n\t\tmargin: 0 .1em;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: 0 .25em;\n\t}\n`\n\ndocument.head.appendChild(styles)\n","let _idx = 0\n\nconst getTimeNowMs = () => new Date().valueOf()\n\nconst getTimeElapsedMs = (prevTimeMs: number) => getTimeNowMs() - prevTimeMs\n\nenum Result {\n    Error,\n    Success,\n}\n\nenum Synchronicity {\n    Sync,\n    Async,\n}\n\nconst withTimeLogging = <T>(fn: T & Function): T => {\n    if (process.env.NODE_ENV !== 'development') {\n        return fn\n    }\n\n    return (((...args: any) => {\n        const idx = _idx++\n        const name = fn.name || '[anonymous]'\n        const startTime = getTimeNowMs()\n\n        const logTimeElapsed = (\n            synchronicity: Synchronicity,\n            result: Result,\n        ) => {\n            const isSuccess = result === Result.Success\n            const isAsync = synchronicity === Synchronicity.Async\n            const method = isSuccess ? 'info' : 'error'\n\n            console[method](\n                `[${idx}] ${isAsync ? 'Async function' : 'Function'} ${name} ${\n                    isSuccess ? 'completed' : 'errored'\n                } in ${getTimeElapsedMs(startTime)}\\xa0ms`,\n            )\n        }\n\n        try {\n            const val = fn(...args)\n\n            if (val instanceof Promise) {\n                return val\n                    .catch(e => {\n                        logTimeElapsed(Synchronicity.Async, Result.Error)\n\n                        throw e\n                    })\n                    .then(val2 => {\n                        logTimeElapsed(Synchronicity.Async, Result.Success)\n\n                        return val2\n                    })\n            } else {\n                logTimeElapsed(Synchronicity.Sync, Result.Success)\n\n                return val\n            }\n        } catch (e) {\n            logTimeElapsed(Synchronicity.Sync, Result.Error)\n\n            throw e\n        }\n    }) as any) as T\n}\n\nif (process.env.NODE_ENV === 'development') {\n    ;(window as any).withTimeLogging = withTimeLogging\n}\n\nexport { withTimeLogging }\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nconst theme = createMuiTheme({\n    overrides: {\n        MuiTooltip: {\n            tooltip: {\n                // fontSize: '2em',\n                color: '#000',\n                backgroundColor: 'ivory',\n            },\n            arrow: {\n                color: 'ivory',\n            },\n        },\n    },\n    palette: {\n        common: { black: '#000', white: '#fff' },\n        type: 'dark',\n        primary: {\n            main: '#26c6dd',\n            light: 'rgb(81,209,227)',\n            dark: 'rgb(26,138,154)',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        secondary: {\n            main: '#f13a64',\n            light: 'rgb(91,119,146)',\n            dark: 'rgb(35,59,83)',\n            contrastText: '#fff',\n        },\n        error: {\n            light: '#e57373',\n            main: '#f44336',\n            dark: '#d32f2f',\n            contrastText: '#fff',\n        },\n        warning: {\n            light: '#ffb74d',\n            main: '#ff9800',\n            dark: '#f57c00',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        info: {\n            light: '#64b5f6',\n            main: '#2196f3',\n            dark: '#1976d2',\n            contrastText: '#fff',\n        },\n        success: {\n            light: '#81c784',\n            main: '#4caf50',\n            dark: '#388e3c',\n            contrastText: 'rgba(0,0,0,0.87)',\n        },\n        grey: {\n            '50': '#fafafa',\n            '100': '#f5f5f5',\n            '200': '#eeeeee',\n            '300': '#e0e0e0',\n            '400': '#bdbdbd',\n            '500': '#9e9e9e',\n            '600': '#757575',\n            '700': '#616161',\n            '800': '#424242',\n            '900': '#212121',\n            A100: '#d5d5d5',\n            A200: '#aaaaaa',\n            A400: '#303030',\n            A700: '#616161',\n        },\n        contrastThreshold: 3,\n        tonalOffset: 0.2,\n        text: {\n            primary: '#fff',\n            secondary: 'rgba(255,255,255,0.7)',\n            disabled: 'rgba(255,255,255,0.5)',\n            hint: 'rgba(255,255,255,0.5)',\n        },\n        divider: 'rgba(255,255,255,0.12)',\n        background: {\n            paper: '#424242',\n            default: '#121212',\n        },\n        action: {\n            active: '#fff',\n            hover: 'rgba(255,255,255,0.08)',\n            hoverOpacity: 0.08,\n            selected: 'rgba(255,255,255,0.16)',\n            disabled: 'rgba(255,255,255,0.3)',\n            disabledBackground: 'rgba(255,255,255,0.12)',\n        },\n    },\n})\n\nexport { theme }\n","import React from 'react'\n\nexport default () => {\n    return (\n        <div\n            style={{\n                width: '100vw',\n                height: '100vh',\n                position: 'fixed',\n                background: 'linear-gradient(180deg, #111, #022)',\n                zIndex: -1,\n            }}\n        />\n    )\n}\n","// @ts-nocheck\n\nimport React from 'react'\nimport { Link as ReachLink, LinkProps } from '@reach/router'\n\nconst BASE = process.env.PUBLIC_URL\n\nconst Link: React.FC<LinkProps<any> & {\n    absolute?: boolean\n    external?: boolean\n}> = React.forwardRef(\n    ({ to = '', children, absolute, external, ...props }, ref) => {\n        if (external) {\n            return (\n                <a\n                    href={to}\n                    ref={ref}\n                    target='_blank'\n                    rel='noopener noreferrer'\n                >\n                    {children}\n                </a>\n            )\n        }\n\n        if (!absolute && to[0] === '/') {\n            to = `${BASE}${to}`\n        }\n        return (\n            <ReachLink ref={ref} {...props} to={to}>\n                {children}\n            </ReachLink>\n        )\n    },\n)\n\nexport default Link\n","import React from 'react'\nimport { Typography } from '@material-ui/core'\nimport Link from './Link'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n    root: { margin: '2em auto' },\n}))\n\nconst Footer: React.FC = () => {\n    const classes = useStyles()\n\n    return (\n        <>\n            <footer className={classes.root}>\n                <div>\n                    <hr />\n                    <Typography\n                        style={{ margin: '1.5em auto' }}\n                        variant='body1'\n                        component='p'\n                    >\n                        Data from{' '}\n                        <Link external to='https://cc-cedict.org/wiki/'>\n                            CC-CEDICT\n                        </Link>{' '}\n                        (\n                        <Link\n                            external\n                            to='https://creativecommons.org/licenses/by-sa/3.0/'\n                        >\n                            CC BY-SA 3.0\n                        </Link>\n                        ).\n                    </Typography>\n                </div>\n            </footer>\n        </>\n    )\n}\n\nexport default Footer\n","const parseTsv = (tsv: string) => {\n    const lines = tsv.trim().split(/\\r?\\n/)\n\n    return lines.map(line => {\n        const cells = line.split('\\t').map(cell => cell.trim())\n\n        return cells\n    })\n}\n\nconst rowHeadingsToProps = (rows: string[][]) => {\n    const [headers, ...entries] = rows\n\n    return entries.map(e => {\n        const obj: { [key: string]: string } = {}\n\n        headers.forEach((h, i) => (obj[h] = e[i]))\n\n        return obj\n    })\n}\n\nexport { parseTsv, rowHeadingsToProps }\n","import DB_VERSION from './db-version.json'\n\nconst config = {\n    DB_VERSION,\n    MAX_TIMEOUT: 10_000,\n    DB_NAME: 'dict_data',\n    CEDICT_TABLE_NAME: 'cedict',\n}\n\nexport default config\n","class NoDataError extends Error {}\n\nexport { NoDataError }\n","import React from 'react'\n\nimport {\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions,\n} from '@material-ui/core'\n\ninterface ModalOptions {\n    text: string\n    title?: string\n    icon?: React.FC\n    showCancelButton?: boolean\n    confirmButtonText?: string\n    cancelButtonText?: string\n}\n\nconst Modal = ({\n    isOpen,\n    onResolve,\n    text,\n    title,\n    icon: Icon,\n    showCancelButton,\n    confirmButtonText,\n    cancelButtonText,\n}: ModalOptions & { isOpen: boolean; onResolve: (val: boolean) => void }) => {\n    return (\n        <Dialog\n            open={isOpen}\n            onClose={() => onResolve(false)}\n            aria-labelledby='alert-dialog-title'\n            aria-describedby='alert-dialog-description'\n        >\n            {/* {Icon && <Icon />} */}\n            {title && (\n                <DialogTitle id='alert-dialog-title'>{title}</DialogTitle>\n            )}\n            <DialogContent>\n                <DialogContentText id='alert-dialog-description'>\n                    {text}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant='contained'\n                    disableElevation\n                    onClick={() => onResolve(true)}\n                    color='primary'\n                    autoFocus\n                >\n                    {confirmButtonText ?? 'Confirm'}\n                </Button>\n                {showCancelButton && (\n                    <Button\n                        // variant='contained'\n                        onClick={() => onResolve(false)}\n                        // color='secondary'\n                    >\n                        {cancelButtonText ?? 'Cancel'}\n                    </Button>\n                )}\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default Modal\n","import { createModal } from 'react-modal-promise'\nimport Modal from '../components/Modal'\n\nconst fireModal = createModal(Modal)\n\nexport default fireModal\n","import { parseTsv, rowHeadingsToProps } from '../lib/parse-tsv'\nimport config from '../config'\nimport { openDB, deleteDB, IDBPDatabase } from 'idb'\n\nimport cedictUrl from '../assets/cc-cedict.tsv'\nimport { NoDataError } from '../lib/errors'\nimport fireModal from '../lib/fireModal'\n\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline'\n\nconst { DB_NAME, CEDICT_TABLE_NAME, DB_VERSION } = config\n\nconst DB_REQUIRES_SEEDING = 'dbRequiresSeeding'\nconst CEDICT_TSV_ETAG = 'cedictTsvEtag'\n\nconst seedDb = async (db: IDBPDatabase) => {\n    const connection = (navigator as any).connection || {}\n\n    if (\n        process.env.NODE_ENV === 'development' || // debug\n        connection.saveData ||\n        connection.type === 'cellular'\n    ) {\n        const head = await fetch(cedictUrl, {\n            method: 'HEAD',\n        })\n\n        const contentLength = head.headers.get('content-length')\n\n        const title = contentLength\n            ? `Download ${(+contentLength / 1000 / 1000).toFixed(1)}\\xa0MB?`\n            : 'Download data?'\n\n        const userConfirmed = await fireModal({\n            showCancelButton: true,\n            confirmButtonText: 'Download',\n            title,\n            text:\n                'This is required the first time you run this app. Consider switching to a Wi-Fi connection.',\n            icon: HelpOutlineIcon,\n        })\n\n        if (!userConfirmed) {\n            // TODO - show app load fail state\n\n            throw new NoDataError('User declined to download data.')\n        }\n    }\n\n    const res = await fetch(cedictUrl)\n    const text = await res.text()\n\n    const rows = parseTsv(text)\n    const entries = rowHeadingsToProps(rows)\n\n    const tx = db.transaction(CEDICT_TABLE_NAME, 'readwrite')\n    const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n    store.put(entries, 'entries')\n\n    localStorage.removeItem(DB_REQUIRES_SEEDING)\n    localStorage.setItem(CEDICT_TSV_ETAG, res.headers.get('etag') || 'unknown')\n\n    return\n}\n\nlet db = new Promise<IDBPDatabase>(async (resolve, reject) => {\n    const _db = await openDB(DB_NAME, DB_VERSION, {\n        upgrade(db, oldVersion, _newVersion, transaction) {\n            if (!oldVersion) {\n                db.createObjectStore(CEDICT_TABLE_NAME)\n            }\n\n            if (oldVersion < 1582933903995) {\n                localStorage.clear()\n\n                const store = transaction.objectStore(CEDICT_TABLE_NAME)\n\n                store.clear()\n\n                localStorage.setItem(DB_REQUIRES_SEEDING, 'yes')\n            }\n        },\n    })\n\n    const tx = _db.transaction(CEDICT_TABLE_NAME)\n    const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n    const entriesExist = await store.getKey('entries')\n\n    if (!entriesExist || localStorage.getItem(DB_REQUIRES_SEEDING)) {\n        try {\n            await seedDb(_db)\n        } catch (e) {\n            console.error(e)\n\n            reject(e)\n        }\n    }\n\n    resolve(_db)\n})\n\nconst Cedict = {\n    all: new Promise<CedictEntry[]>(async (resolve, reject) => {\n        try {\n            const _db = await db\n\n            const tx = _db.transaction(CEDICT_TABLE_NAME)\n            const store = tx.objectStore(CEDICT_TABLE_NAME)\n\n            const entries = await store.get('entries')\n\n            resolve(entries)\n        } catch (e) {\n            console.error(e)\n\n            reject(e)\n        }\n    }),\n}\n\nif (process.env.NODE_ENV === 'development') {\n    // debug\n\n    const _window = window as any\n\n    _window.deleteDB = deleteDB\n    _window.openDB = openDB\n    _window.seedDb = seedDb\n    _window.Cedict = Cedict\n    _window.db = db\n}\n\nexport default Cedict\n","// modified from http://pinyin.info/rules/initials_finals.html\nimport pinyinSyllablesUrl from '../assets/pinyin-syllables.tsv'\n\nimport { Parts } from './makeRegex'\n\nexport const pinyinToPartsMappingPromise = new Promise<Record<string, Parts>>(\n    async resolve => {\n        const res = await fetch(pinyinSyllablesUrl)\n        const txt = await res.text()\n        const sylls = txt.split('\\n').map(x => x.split('\\t'))\n\n        const [initials, ...rows] = sylls\n\n        const pinyinToPartsMapping: Record<string, Parts> = Object.create(null)\n\n        rows.forEach((row, _rowIdx) => {\n            const [medial, final] = row.slice(0, 2)\n\n            row.forEach((cell, cellIdx) => {\n                if (cellIdx < 2 || !cell.trim()) return\n\n                pinyinToPartsMapping[cell] = [\n                    initials[cellIdx] || null,\n                    medial || null,\n                    final || null,\n                ]\n            })\n        })\n\n        resolve(pinyinToPartsMapping)\n    },\n)\n","// @ts-nocheck\n\n// GENERIC FUNCTIONS\n\n// replicateM n act performs the action n times, gathering the results.\n// replicateM :: (Applicative m) => Int -> m a -> m [a]\nconst replicateM = (n, f) => {\n    const loop = x => (x <= 0 ? [[]] : liftA2(cons, f, loop(x - 1)))\n    return loop(n)\n}\n\n// Lift a binary function to actions.\n// liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c\nconst liftA2 = (f, a, b) => listApply(a.map(curry(f)), b)\n\n// <*>\n// listApply :: [(a -> b)] -> [a] -> [b]\nconst listApply = (fs, xs) =>\n    [].concat.apply(\n        [],\n        fs.map(f =>\n            [].concat.apply(\n                [],\n                xs.map(x => [f(x)]),\n            ),\n        ),\n    )\n\n// curry :: ((a, b) -> c) -> a -> b -> c\nconst curry = f => a => b => f(a, b)\n\n// cons :: a -> [a] -> [a]\nconst cons = (x, xs) => [x].concat(xs)\n\nexport const orderedPermute = <T>(arrArr: T[][]): T[][] => {\n    const len = Math.min(...arrArr.map(x => x.length))\n\n    const arrIdxs = new Array(arrArr.length).fill(null).map((_, idx) => idx)\n\n    return replicateM(len, arrIdxs).map(currArrIdxs =>\n        currArrIdxs.map((arrIdx, idx) => arrArr[arrIdx][idx]),\n    )\n}\n","import { orderedPermute } from './permute'\n\nconst __ = Symbol('__')\nconst $0 = Symbol('$0')\n\ntype ReplaceFn = (...args: string[]) => string\n\ntype Part = string | null\ntype Matcher = Part | RegExp | typeof __\ntype Replacer = Part | ReplaceFn | typeof $0\n\nexport type Parts = [Part, Part, Part]\ntype Matchers = [Matcher, Matcher, Matcher]\ntype Replacers = [Replacer, Replacer, Replacer]\ntype MatchReplace = [Matchers, Replacers]\n\n// match first only\nconst contextMappings: MatchReplace[] = [\n    // jun etc.\n    [\n        [/^[jqx]$/, 'v', 'en'],\n        [$0, 'u', 'n'],\n    ],\n\n    // yun\n    [\n        [null, 'v', 'en'],\n        [$0, 'yu', 'n'],\n    ],\n\n    // jue etc.\n    [\n        [/^[jqx]$/, 'v', __],\n        [$0, 'u', $0],\n    ],\n\n    // wu etc.\n    [\n        [null, 'u', null],\n        [$0, 'wu', $0],\n    ],\n    [\n        [null, 'u', __],\n        [$0, 'w', $0],\n    ],\n\n    // yi etc.\n    [\n        [null, 'i', null],\n        [$0, 'yi', $0],\n    ],\n    [\n        [null, 'i', /^e(ng?)$/],\n        [$0, 'yi', '$1'],\n    ],\n    [\n        [null, 'i', __],\n        [$0, 'y', $0],\n    ],\n\n    // yu etc.\n    [\n        [null, 'v', __],\n        [$0, 'yu', $0],\n    ],\n\n    // hui etc.\n    [\n        [__, 'u', 'ei'],\n        [$0, $0, 'i'],\n    ],\n\n    // liu etc.\n    [\n        [__, 'i', 'ou'],\n        [$0, $0, 'u'],\n    ],\n\n    // zero final\n    [\n        [/^[zcs]h?|r$/, null, null],\n        [$0, 'i', $0],\n    ],\n\n    // lin, ling etc.\n    [\n        [__, /^[iuv]$/, /^e(ng?)$/],\n        [$0, $0, '$1'],\n    ],\n]\n\nconst isMatch = (matchers: Matchers) => (parts: Parts) => {\n    return matchers.every((matcher, idx) => {\n        const part = parts[idx]\n\n        return matcher === __\n            ? true\n            : matcher instanceof RegExp\n            ? part && matcher.test(part)\n            : part === matcher\n    })\n}\n\nconst transformParts = (parts: Parts, [matchers, replacers]: MatchReplace) =>\n    parts.map((part, idx) => {\n        return replacers[idx] === $0\n            ? part\n            : matchers[idx] instanceof RegExp\n            ? part?.replace(matchers[idx] as RegExp, replacers[idx] as string)\n            : replacers[idx]\n    }) as Parts\n\nconst spellPinyin = (parts: Parts) => {\n    const m = contextMappings.find(([k, _v]) => isMatch(k)(parts))\n\n    if (!m) {\n        return parts.filter(Boolean).join('')\n    }\n\n    return transformParts(parts, m).filter(Boolean).join('')\n}\n\nconst jToZ = (ch: string) => 'zcs'['jqx'.indexOf(ch)]\nconst zToJ = (ch: string) => 'jqx'['zcs'.indexOf(ch)]\nconst jToZh = (ch: string) => 'zcs'['jqx'.indexOf(ch)] + 'h'\nconst zhToJ = (str: string) => 'jqx'['zcs'.indexOf(str[0])]\n\nexport const fuzzyReplacements: {\n    id: FuzzyReplacementId\n    name: string\n    alts: MatchReplace[]\n}[] = [\n    {\n        id: 'zh-j',\n        name: 'zh ⇄ j, ch ⇄ q, sh ⇄ x',\n        alts: [\n            [\n                [/^[zcs]h$/, null, __],\n                [zhToJ, 'i', $0],\n            ],\n            [\n                [/^[jqx]$/, 'i', __],\n                [jToZh, null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'z-j',\n        name: 'z ⇄ j, c ⇄ q, s ⇄ x',\n        alts: [\n            [\n                [/^[zcs]$/, null, __],\n                [zToJ, 'i', $0],\n            ],\n            [\n                [/^[jqx]$/, 'i', __],\n                [jToZ, null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'z-zh',\n        name: 'z ⇄ zh, c ⇄ ch, s ⇄ sh',\n        alts: [\n            [\n                [/^[zcs]$/, __, __],\n                ['$&h', $0, $0],\n            ],\n            [\n                [/^[zcs]h$/, __, __],\n                [m => m[0], $0, $0],\n            ],\n        ],\n    },\n    {\n        id: 'n-l',\n        name: 'n ⇄ l',\n        alts: [\n            [\n                ['n', __, __],\n                ['l', $0, $0],\n            ],\n            [\n                ['l', __, __],\n                ['n', $0, $0],\n            ],\n        ],\n    },\n    {\n        id: 'f-hu',\n        name: 'f ⇄ hu',\n        alts: [\n            [\n                ['f', 'u', null],\n                ['h', $0, $0],\n            ],\n            [\n                ['h', 'u', null],\n                ['f', $0, $0],\n            ],\n            [\n                ['f', null, __],\n                ['h', 'u', $0],\n            ],\n            [\n                ['h', 'u', __],\n                ['f', null, $0],\n            ],\n        ],\n    },\n    {\n        id: 'n-ng',\n        name: '-n ⇄ -ng',\n        alts: [\n            [\n                [__, __, /^.+n$/],\n                [$0, $0, '$&g'],\n            ],\n            [\n                [__, __, /^.+ng$/],\n                [$0, $0, m => m.slice(0, -1)],\n            ],\n        ],\n    },\n]\n\nexport type FuzzyReplacementId =\n    | 'zh-j'\n    | 'z-j'\n    | 'z-zh'\n    | 'n-l'\n    | 'f-hu'\n    | 'n-ng'\n\nconst makeAlts = (\n    py: string,\n    pinyinToPartsMapping: Record<string, Parts>,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n) => {\n    const alts: Parts[] = []\n\n    const parts = pinyinToPartsMapping[py]\n\n    if (!parts) return null\n\n    alts.push(parts)\n\n    const enabledReplacements = fuzzyReplacements.filter(r =>\n        enabledFuzzyReplacementIds.includes(r.id),\n    )\n\n    enabledReplacements.forEach(r => {\n        r.alts.forEach(a => {\n            if (isMatch(a[0])(parts)) {\n                alts.push(transformParts(parts, a))\n            }\n        })\n    })\n\n    return alts\n}\n\nconst spellValidAltsWith = (\n    pinyinToPartsMapping: Record<string, Parts>,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n) => (py: string) => {\n    const alts = makeAlts(py, pinyinToPartsMapping, enabledFuzzyReplacementIds)\n\n    if (!alts) return []\n\n    return (orderedPermute(alts) as Parts[])\n        .map(spellPinyin)\n        .filter(py => pinyinToPartsMapping[py])\n        .filter((py, idx, arr) => arr.indexOf(py) === idx)\n}\n\nexport const makeRegexWith = (\n    pinyinToPartsMapping: Record<string, Parts>,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n) => (py: string) => {\n    const spellValidAlts = spellValidAltsWith(\n        pinyinToPartsMapping,\n        enabledFuzzyReplacementIds,\n    )\n\n    const segments = py\n        .toLowerCase()\n        .split(/[^a-z]+/)\n        .filter(Boolean)\n        .map(x => {\n            const alts = spellValidAlts(x)\n            return alts.length ? `(?:${alts.join('|')})` : null\n        })\n        .filter(Boolean)\n\n    const regex = segments.length\n        ? new RegExp(\n              `^(?:[^a-z]|\\\\b)${segments.join('[^a-z]+')}(?:\\\\b|[^a-z])$`,\n              'i',\n          )\n        : null\n\n    process.env.NODE_ENV === 'development' && console.info(regex)\n\n    return regex\n}\n\n// tests - TODO\n\n// const discrepencies = Object.entries(pinyinToPartsMapping)\n//     .map(([k, v]) => [k, spellPinyin(v)])\n//     .filter(a => a[0] !== a[1])\n\n// console.assert(!discrepencies.length)\n","import config from '../config'\nimport { withTimeLogging } from './logging'\n\nimport { pinyinToPartsMappingPromise } from './pinyinToPartsMapping'\nimport { makeRegexWith, FuzzyReplacementId } from './makeRegex'\n\nconst { MAX_TIMEOUT } = config\n\nconst _basicSearch = async (\n    query: string,\n    data: any /* TODO */,\n    enabledFuzzyReplacementIds: FuzzyReplacementId[],\n): Promise<{ results?: CedictEntry[] }> => {\n    let results\n\n    const pinyinToPartsMapping = await pinyinToPartsMappingPromise\n\n    const pinyinRegex = makeRegexWith(\n        pinyinToPartsMapping,\n        enabledFuzzyReplacementIds,\n    )(query)\n\n    const searchWorker = new Worker(\n        `${process.env.PUBLIC_URL}/basic-search-worker.js`,\n    )\n\n    searchWorker.postMessage({\n        type: 'SEARCH',\n        query,\n        pinyinRegex,\n        entries: data,\n    })\n\n    if (/^\\s*$/.test(query)) {\n        throw new RangeError('Please enter some search terms.')\n    }\n\n    results = await new Promise<CedictEntry[]>((resolve, reject) => {\n        searchWorker.onmessage = ({ data }) => {\n            if (data.type === 'ERROR') {\n                reject(data.error)\n            }\n\n            searchWorker.terminate()\n\n            resolve(data.results)\n        }\n\n        setTimeout(() => {\n            searchWorker.terminate()\n\n            reject(new RangeError('Timeout exceeded.'))\n        }, MAX_TIMEOUT)\n    })\n\n    return { results }\n}\n\nconst _advancedSearch = async (\n    query: string,\n    data: any /* TODO */,\n): Promise<{ results?: CedictEntry[] }> => {\n    let results\n\n    let conditions: SearchCondition[]\n\n    const lines = query\n        .split(/\\r?\\n/)\n        .map(el => el.trim())\n        .filter(el => el && !el.startsWith('#'))\n\n    if (lines.length === 1 && lines[0] === '*') {\n        conditions = []\n    } else if (lines.length === 0) {\n        throw new RangeError('Must have at least one condition.')\n    } else {\n        conditions = lines.map(toCondition)\n    }\n\n    const searchWorker = new Worker(\n        `${process.env.PUBLIC_URL}/advanced-search-worker.js`,\n    )\n\n    searchWorker.postMessage({\n        type: 'SEARCH',\n        conditions,\n        entries: data,\n    })\n\n    results = await new Promise<CedictEntry[]>((resolve, reject) => {\n        searchWorker.onmessage = ({ data }) => {\n            if (data.type === 'ERROR') {\n                reject(data.error)\n            }\n\n            searchWorker.terminate()\n\n            resolve(data.results)\n        }\n\n        setTimeout(() => {\n            searchWorker.terminate()\n\n            reject(new RangeError('Timeout exceeded.'))\n        }, MAX_TIMEOUT)\n    })\n\n    return { results }\n}\n\nfunction toCondition(clause: string): SearchCondition {\n    const matcher = /^(?<prop>\\S+)\\s+(?<method>\\S+)\\s+(?<arg>.+)$/\n\n    const matches = clause.match(matcher)\n\n    if (!matches) {\n        throw new SyntaxError(\n            'Each condition must be formatted as \"subject verb object\".',\n        )\n    }\n\n    return { ...((matches.groups as any) as SearchCondition) }\n}\n\nconst [basicSearch, advancedSearch] = [_basicSearch, _advancedSearch].map(\n    withTimeLogging,\n)\n\nexport { basicSearch, advancedSearch }\n","import { decodeB64UrlSafe, encodeB64UrlSafe } from './b64'\nimport { NavigateFn } from '@reach/router'\n\nconst getQueryParam = (paramName: string) =>\n    new URLSearchParams(window.location.search).get(paramName)\n\nconst _setAllQueryParams = (\n    allQueryParams: URLSearchParams,\n    pushNewHistoryItem: boolean,\n    navigate: NavigateFn,\n) => {\n    const newQueryString = Array.from(allQueryParams).length\n        ? '?' + allQueryParams.toString()\n        : ''\n\n    const newPath = window.location.pathname + newQueryString\n\n    navigate(newPath, { replace: !pushNewHistoryItem })\n}\n\nconst clearAllQueryParams = (\n    pushNewHistoryItem: boolean,\n    navigate: NavigateFn,\n) => {\n    _setAllQueryParams(new URLSearchParams([]), pushNewHistoryItem, navigate)\n}\n\nconst setQueryParam = (\n    paramName: string,\n    newVal: string,\n    pushNewHistoryItem: boolean,\n    navigate: NavigateFn,\n) => {\n    const allQueryParams = new URLSearchParams(window.location.search)\n\n    allQueryParams.set(paramName, newVal)\n\n    _setAllQueryParams(allQueryParams, pushNewHistoryItem, navigate)\n}\n\nconst deleteQueryParam = (\n    paramName: string,\n    pushNewHistoryItem: boolean,\n    navigate: NavigateFn,\n) => {\n    const allQueryParams = new URLSearchParams(window.location.search)\n\n    allQueryParams.delete(paramName)\n\n    _setAllQueryParams(allQueryParams, pushNewHistoryItem, navigate)\n}\n\nconst getB64QueryParam = (paramName: string) => {\n    const val = getQueryParam(paramName)\n\n    return val && decodeB64UrlSafe(val)\n}\n\nconst setB64QueryParam = (\n    paramName: string,\n    newVal: string,\n    pushNewHistoryItem: boolean,\n    navigate: NavigateFn,\n) => {\n    const b64 = encodeB64UrlSafe(newVal)\n\n    setQueryParam(paramName, b64, pushNewHistoryItem, navigate)\n}\n\nexport {\n    getQueryParam,\n    setQueryParam,\n    deleteQueryParam,\n    getB64QueryParam,\n    setB64QueryParam,\n    clearAllQueryParams,\n}\n","export default {\n    queryResultIncrementer: 0,\n}\n","import React, { useReducer, useMemo } from 'react'\nimport Cedict from '../repositories/cedict'\nimport { basicSearch, advancedSearch } from '../lib/search'\nimport fireModal from '../lib/fireModal'\nimport { setQueryParam } from '../lib/queryParams'\n\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline'\nimport { FuzzyReplacementId } from '../lib/makeRegex'\nimport { NavigateFn } from '@reach/router'\nimport globals from '../lib/globals'\n\nexport interface AppState {\n    charSet: 'trad' | 'simp'\n    results: CedictEntry[] | null\n    error: Error | null\n    searchQuery: string\n    resultsLoading: boolean\n    cedictDataLoading: boolean\n    page: number | null\n    searchType: 'basic' | 'advanced'\n    enabledFuzzyReplacementIds: Record<FuzzyReplacementId, boolean>\n}\n\ntype SearchActionType = Partial<AppState>\n\nconst initialState: AppState = {\n    charSet: (localStorage.getItem('charSet') || 'simp') as 'trad' | 'simp',\n    results: null,\n    error: null,\n    searchQuery: '',\n    resultsLoading: false,\n    cedictDataLoading: true,\n    page: null,\n    searchType: 'basic',\n    enabledFuzzyReplacementIds: JSON.parse(\n        localStorage.getItem('enabledFuzzyReplacementIds') ||\n            '{\"zh-j\":true,\"z-j\":false,\"n-l\":false,\"z-zh\":true,\"f-hu\":false,\"n-ng\":true}',\n    ) as Record<FuzzyReplacementId, boolean>,\n}\n\nconst reducer = (\n    state: AppState = initialState,\n    action: SearchActionType,\n): AppState => {\n    Object.entries(action).forEach(([k, v]) => {\n        ;(state as any)[k] = v\n    })\n\n    return { ...state }\n}\n\ninterface LoadResultsFromQueryOptions {\n    pushNewHistoryItem?: boolean\n    searchType: 'advanced' | 'basic'\n    navigate: NavigateFn\n}\n\nconst loadResultsFromQuery = async (\n    query: string,\n    {\n        dispatch,\n        state,\n    }: {\n        dispatch: React.Dispatch<SearchActionType>\n        state: AppState\n    },\n    {\n        pushNewHistoryItem = false,\n        searchType,\n        navigate,\n    }: LoadResultsFromQueryOptions,\n) => {\n    const data = await Cedict.all\n\n    const currentQueryResult = ++globals.queryResultIncrementer\n\n    dispatch({\n        results: null,\n        resultsLoading: true,\n    })\n\n    const searchFn = searchType === 'advanced' ? advancedSearch : basicSearch\n\n    try {\n        const { results } = await searchFn(\n            query,\n            data,\n            Object.entries(state.enabledFuzzyReplacementIds)\n                .filter(([_k, v]) => v)\n                .map(([k, _v]) => k) as FuzzyReplacementId[],\n        )\n\n        if (globals.queryResultIncrementer !== currentQueryResult) {\n            // ignore stale results\n            return\n        }\n\n        setQueryParam('q', query, pushNewHistoryItem, navigate)\n\n        return dispatch({ results, resultsLoading: false })\n    } catch (e) {\n        if (globals.queryResultIncrementer !== currentQueryResult) {\n            // ignore stale results\n            return\n        }\n\n        fireModal({ text: e.message, icon: ErrorOutlineIcon })\n\n        return dispatch({ results: null, resultsLoading: false })\n    }\n}\n\nconst AppContext = React.createContext(\n    (initialState as any) as {\n        state: AppState\n        dispatch: React.Dispatch<Partial<AppState>>\n    },\n)\n\nconst AppStateProvider: React.FC = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState)\n\n    const value = useMemo(() => ({ state, dispatch }), [state, dispatch])\n\n    return <AppContext.Provider value={value}>{children}</AppContext.Provider>\n}\n\nexport {\n    reducer,\n    initialState,\n    loadResultsFromQuery,\n    AppContext,\n    AppStateProvider,\n}\n","type vowel =\n    | 'a'\n    | 'e'\n    | 'i'\n    | 'o'\n    | 'u'\n    | 'v'\n    | 'A'\n    | 'E'\n    | 'I'\n    | 'O'\n    | 'U'\n    | 'V'\n\nconst toneMarks: { [key in vowel]: string } = {\n    a: 'aāáǎà',\n    e: 'eēéěè',\n    i: 'iīíǐì',\n    o: 'oōóǒò',\n    u: 'uūúǔù',\n    v: 'üǖǘǚǜ',\n    A: 'AĀÁǍÀ',\n    E: 'EĒÉĚÈ',\n    I: 'IĪÍǏÌ',\n    O: 'OŌÓǑÒ',\n    U: 'UŪÚǓÙ',\n    V: 'ÜǕǗǙǛ',\n}\n\nconst normalize = (syl: string) => syl.replace(/u:|v/g, 'ü')\n\nconst addToneMark = (char: vowel | 'ü', tone: number) => {\n    if (tone === 5) tone = 0\n\n    if (char === 'ü') char = 'v'\n\n    return toneMarks[char][tone]\n}\n\nconst isPinyin = (syl: string) => /^[a-hj-tw-z][a-zü:]*\\d?$/i.test(syl)\n\nconst withToneMark = (syl: string) => {\n    const lastChar = syl.slice(-1)[0]\n\n    if (!/\\d/.test(lastChar)) {\n        syl += '5'\n    }\n\n    const tone = +syl.slice(-1)[0]\n\n    return syl\n        .slice(0, -1)\n        .replace(/(?:a|e|o(?=u)|[iouüv](?![aeiouüv]))/i, m =>\n            addToneMark(m as vowel | 'ü', tone),\n        )\n}\n\nconst prettifySyl = (syl: string) => {\n    return isPinyin(syl) ? withToneMark(normalize(syl)) : syl\n}\n\nconst prettify = (word: string) =>\n    word.replace(/[a-zü:]+\\d?/gi, s => prettifySyl(s))\n\nexport { prettify }\n\n// success\n// prettify('Ni3 you3 nu:3 peng2 you3 ma?');\n// prettify('Ma3 ma3, hu1 hu5 nv5');\n// prettify('mao4 mei4');\n// prettify('xiong1 shi4 ji1 dan4');\n// prettify('lu:e4');\n// prettify('lve4');\n// prettify('lüe4');\n\n// // known issues\n// prettify('high5');\n// prettify('GangOf4');\n\n// \"Nǐ yǒu nǚ péng yǒu ma?\"\n","import React, { useContext } from 'react'\nimport { prettify } from '../lib/pinyinize'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles(theme => ({\n    root: { marginBottom: '2em' },\n    charGloss: { display: 'flex', flexWrap: 'wrap' },\n    rubyRoot: { fontSize: '2.5em', paddingRight: '0.2em' },\n    defList: { paddingLeft: '1.2em', margin: '0.5em 0' },\n    headwordNoRuby: { fontSize: '2.5em' },\n}))\n\nconst Result: React.FC<{\n    entry: CedictEntry\n    isLast: boolean\n}> = ({ entry, isLast }) => {\n    const classes = useStyles()\n\n    const { state } = useContext(AppContext)\n\n    const { charSet } = state\n\n    const { pinyin, def } = entry\n\n    const currentCharVersion = entry[charSet]\n\n    const chars = Array.from(currentCharVersion)\n    const oppCharTypeName = charSet === 'simp' ? 'trad' : 'simp'\n    const oppCharVersion = entry[oppCharTypeName]\n\n    const pinyinSyls: (string | null)[] = pinyin\n        .split(' ')\n        .map(py => prettify(py))\n\n    let renderRuby = false\n\n    if (chars.length !== pinyinSyls.length) {\n        process.env.NODE_ENV === 'development' &&\n            console.info('chars.length !== pinyinSyls.length', entry)\n    } else {\n        chars.forEach((char, idx) => {\n            const py = pinyinSyls[idx] as string\n\n            if (py === 'xx') {\n                pinyinSyls[idx] = null\n            } else if (py === char) {\n                // noop\n            } else {\n                renderRuby = true\n            }\n        })\n    }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.charGloss}>\n                {chars.map((char, idx) => {\n                    if (!renderRuby) {\n                        return (\n                            <span key={idx} className={classes.headwordNoRuby}>\n                                {char}\n                            </span>\n                        )\n                    }\n\n                    return (\n                        <ruby key={idx} className={classes.rubyRoot}>\n                            {char}\n                            <rp>(</rp>\n                            <rt>{pinyinSyls[idx] || '\\xa0'}</rt>\n                            <rp>)</rp>\n                        </ruby>\n                    )\n                })}\n            </div>\n            {oppCharVersion !== currentCharVersion && (\n                <div>\n                    {oppCharTypeName[0].toUpperCase() +\n                        oppCharTypeName.slice(1)}\n                    : {oppCharVersion}\n                </div>\n            )}\n            <div>\n                <ul className={classes.defList}>\n                    {def.split(/\\s*[/;]\\s*/).map((item, idx) => (\n                        <li key={idx}>{item}</li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nexport default Result\n\n// {\n//     ;`${index}. ${chars} [${prettify(pinyin)}]\\n${\n// }\n","import { useState } from 'react'\n\nlet idx = 0\n\nconst useHtmlId = (prefix = 'id') => {\n    const [htmlId /* , setHtmlId */] = useState(`${prefix}-${++idx}`)\n\n    return htmlId\n}\n\nexport { useHtmlId }\n","const PAGE_TITLE = 'Zi Zi Bu Wang'\nconst DELIMITER = ' - '\n\nconst setTitle = (newTitle: string[] | null) => {\n    const title = newTitle ? [...newTitle, PAGE_TITLE].join(DELIMITER) : null\n\n    if (title) document.title = title\n}\n\nexport { setTitle }\n","export const truncate = (len: number, overflowFiller = '…') => (str: string) =>\n    str.length > len\n        ? str.slice(0, len - overflowFiller.length) + overflowFiller\n        : str\n","import React, { useContext } from 'react'\nimport { CircularProgress } from '@material-ui/core'\n\nimport Pagination from '@material-ui/lab/Pagination'\n\nimport Result from '../components/Result'\nimport { AppContext } from '../state/Context'\nimport { setQueryParam } from '../lib/queryParams'\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { useNavigate } from '@reach/router'\nimport { setTitle } from '../lib/setTitle'\nimport { truncate } from '../lib/formatters'\n\nconst PER_PAGE = 50\n\nconst ResultsList: React.FC<{ page: number; results: CedictEntry[] }> = ({\n    results,\n    page,\n}) => {\n    return (\n        <>\n            {results\n                .slice((page - 1) * PER_PAGE, page * PER_PAGE)\n                .map((result, idx) => {\n                    return (\n                        <Result\n                            key={idx}\n                            entry={result}\n                            isLast={idx === results.length - 1}\n                        />\n                    )\n                })}\n        </>\n    )\n}\n\nconst ResultsDisplay: React.FC = () => {\n    const { state, dispatch } = useContext(AppContext)\n\n    const navigate = useNavigate()\n\n    const outputId = useHtmlId('output')\n\n    const {\n        results,\n        resultsLoading,\n        page: _page,\n        searchQuery,\n        searchType,\n    } = state\n\n    const page = _page || 1\n\n    if (results && !resultsLoading) {\n        setTitle(\n            [\n                truncate(50)(searchQuery),\n                page > 1 ? `page ${page}` : '',\n                searchType === 'advanced' ? 'Advanced Search' : 'Search',\n            ].filter(Boolean),\n        )\n    }\n\n    return (\n        <output id={outputId} className='output'>\n            {resultsLoading ? (\n                <div\n                    style={{\n                        marginTop: '2em',\n                        display: 'flex',\n                        justifyContent: 'center',\n                    }}\n                >\n                    <CircularProgress style={{ zoom: 1.2 }} color='primary' />\n                </div>\n            ) : (\n                results && (\n                    <>\n                        <div style={{ margin: '1.5em 0', display: 'flex' }}>\n                            <hr style={{ flexGrow: 1, height: 0 }} />\n                            <div style={{ padding: '0 20px' }}>\n                                <strong>\n                                    {results.length.toLocaleString('en-US')}\n                                </strong>{' '}\n                                <span>\n                                    {results.length === 1\n                                        ? 'result'\n                                        : 'results'}\n                                </span>\n                            </div>\n                            <hr style={{ flexGrow: 1, height: 0 }} />\n                        </div>\n                        {results.length > 0 && (\n                            <ResultsList page={page} results={results} />\n                        )}\n\n                        <Pagination\n                            page={page}\n                            onChange={(_e: any, n: number) => {\n                                dispatch({ page: n })\n\n                                setQueryParam(\n                                    'page',\n                                    n.toString(),\n                                    true,\n                                    navigate,\n                                )\n\n                                window.scrollTo(0, 0)\n                            }}\n                            count={Math.floor(results.length / PER_PAGE)}\n                        />\n                    </>\n                )\n            )}\n        </output>\n    )\n}\n\nexport default ResultsDisplay\n","import React, { useContext } from 'react'\nimport SearchIcon from '@material-ui/icons/Search'\n\nimport {\n    FormControl,\n    InputLabel,\n    FilledInput,\n    InputAdornment,\n    Tooltip,\n    IconButton,\n} from '@material-ui/core'\n\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { AppContext } from '../state/Context'\n\nconst BasicSearch: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const { searchQuery } = state\n\n    const searchConditionsId = useHtmlId('search-conditions')\n\n    return (\n        <FormControl style={{ margin: '1em 0' }} fullWidth variant='filled'>\n            <InputLabel htmlFor={searchConditionsId}>Search terms</InputLabel>\n            <FilledInput\n                id={searchConditionsId}\n                value={searchQuery}\n                onChange={e => {\n                    dispatch({\n                        searchQuery: e.currentTarget.value,\n                    })\n                }}\n                style={{\n                    paddingRight: '3em',\n                }}\n                autoComplete='off'\n                autoCorrect='off'\n                autoCapitalize='off'\n                spellCheck='false'\n                name='search-conditions'\n                placeholder='Enter search terms'\n                endAdornment={\n                    <InputAdornment position='end'>\n                        <Tooltip placement='left' title='Search' arrow>\n                            <IconButton\n                                type='submit'\n                                aria-label='Search'\n                                style={{\n                                    position: 'absolute',\n                                    top: '50%',\n                                    transform: 'translateY(-50%)',\n                                    right: 0,\n                                    marginRight: 6,\n                                }}\n                            >\n                                <SearchIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </InputAdornment>\n                }\n            />\n        </FormControl>\n    )\n}\n\nexport default BasicSearch\n","import React, { useContext } from 'react'\nimport SearchIcon from '@material-ui/icons/Search'\nimport HelpIcon from '@material-ui/icons/Help'\n\nimport {\n    FormControl,\n    InputLabel,\n    FilledInput,\n    InputAdornment,\n    Tooltip,\n    IconButton,\n} from '@material-ui/core'\n\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { AppContext } from '../state/Context'\nimport { useNavigate } from '@reach/router'\n\nconst AdvancedSearch: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const { searchQuery } = state\n\n    const navigate = useNavigate()\n\n    const searchConditionsId = useHtmlId('search-conditions')\n\n    return (\n        <FormControl style={{ margin: '1em 0' }} fullWidth variant='filled'>\n            <InputLabel\n                style={{\n                    fontFamily:\n                        'monospace, \"Noto Sans CJK SC\", \"Noto Sans CJK TC\", \"Microsoft YaHei\"',\n                }}\n                htmlFor={searchConditionsId}\n            >\n                Search query\n            </InputLabel>\n            <FilledInput\n                id={searchConditionsId}\n                style={{\n                    fontFamily:\n                        'monospace, \"Noto Sans CJK SC\", \"Noto Sans CJK TC\", \"Microsoft YaHei\"',\n                    paddingRight: '5.5em',\n                }}\n                value={searchQuery}\n                onChange={e => {\n                    dispatch({\n                        searchQuery: e.currentTarget.value,\n                    })\n                }}\n                multiline\n                autoComplete='off'\n                autoCorrect='off'\n                autoCapitalize='off'\n                spellCheck='false'\n                name='search-conditions'\n                placeholder='Enter query'\n                endAdornment={\n                    <>\n                        <InputAdornment position='end'>\n                            <Tooltip placement='left' title='Search' arrow>\n                                <IconButton\n                                    type='submit'\n                                    aria-label='Search'\n                                    style={{\n                                        position: 'absolute',\n                                        top: '50%',\n                                        transform: 'translateY(-50%)',\n                                        right: '2em',\n                                        marginRight: 6,\n                                    }}\n                                >\n                                    <SearchIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </InputAdornment>\n                        <InputAdornment position='end'>\n                            <Tooltip placement='left' title='Help' arrow>\n                                <IconButton\n                                    role='link'\n                                    color='secondary'\n                                    onClick={e =>\n                                        navigate(\n                                            process.env.PUBLIC_URL +\n                                                '/instructions#advanced-search',\n                                        )\n                                    }\n                                    aria-label='Help'\n                                    style={{\n                                        position: 'absolute',\n                                        top: '50%',\n                                        transform: 'translateY(-50%)',\n                                        right: 0,\n                                        marginRight: 6,\n                                    }}\n                                >\n                                    <HelpIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </InputAdornment>\n                    </>\n                }\n            />\n        </FormControl>\n    )\n}\n\nexport default AdvancedSearch\n","import React, { useContext } from 'react'\nimport { Tabs, Tab } from '@material-ui/core'\nimport { AppContext, loadResultsFromQuery } from '../state/Context'\nimport { deleteQueryParam } from '../lib/queryParams'\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport BasicSearch from './BasicSearch'\nimport AdvancedSearch from './AdvancedSearch'\nimport { useNavigate } from '@reach/router'\n\nconst TabPanel: React.FC<{\n    id: string\n    active: boolean\n    labelledBy: string\n}> = ({ children, id, active, labelledBy }) => {\n    return (\n        <div id={id} hidden={!active} aria-labelledby={labelledBy}>\n            {children}\n        </div>\n    )\n}\n\nconst SearchForm: React.FC = () => {\n    const { dispatch, state } = useContext(AppContext)\n\n    const navigate = useNavigate()\n\n    const { searchQuery, searchType } = state\n\n    const searchFormId = useHtmlId('search-form')\n\n    const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault()\n\n        loadResultsFromQuery(\n            searchQuery,\n            { dispatch, state },\n            {\n                pushNewHistoryItem: true,\n                searchType,\n                navigate,\n            },\n        )\n\n        deleteQueryParam('page', false, navigate)\n\n        dispatch({ page: null })\n    }\n\n    const basicSearchTabId = useHtmlId('basic-search-tab')\n    const advancedSearchTabId = useHtmlId('advanced-search-tab')\n    const basicSearchPanelId = useHtmlId('basic-search-panel')\n    const advancedSearchPanelId = useHtmlId('advanced-search-panel')\n\n    return (\n        <form\n            id={searchFormId}\n            style={{ marginTop: '1em' }}\n            onSubmit={submitForm}\n        >\n            <Tabs\n                indicatorColor='primary'\n                value={searchType}\n                onChange={(_e, newVal) => {\n                    if (newVal !== state.searchType) {\n                        dispatch({ searchType: newVal })\n\n                        navigate(\n                            process.env.PUBLIC_URL +\n                                (newVal === 'advanced' ? '/advanced' : '/'),\n                        )\n                    }\n                }}\n                aria-label='Search type'\n            >\n                <Tab\n                    id={basicSearchTabId}\n                    label='Basic'\n                    value='basic'\n                    aria-controls={basicSearchPanelId}\n                />\n                <Tab\n                    id={advancedSearchTabId}\n                    label='Advanced'\n                    value='advanced'\n                    aria-controls={advancedSearchPanelId}\n                />\n            </Tabs>\n            <TabPanel\n                id={basicSearchPanelId}\n                active={searchType === 'basic'}\n                labelledBy={basicSearchTabId}\n            >\n                <BasicSearch />\n            </TabPanel>\n            <TabPanel\n                id={advancedSearchPanelId}\n                active={searchType === 'advanced'}\n                labelledBy={advancedSearchTabId}\n            >\n                <AdvancedSearch />\n            </TabPanel>\n        </form>\n    )\n}\n\nexport default SearchForm\n","import React, { useEffect, useContext } from 'react'\nimport { RouteComponentProps, useNavigate } from '@reach/router'\nimport { Typography } from '@material-ui/core'\nimport { deleteQueryParam, getQueryParam } from '../lib/queryParams'\nimport Cedict from '../repositories/cedict'\nimport { NoDataError } from '../lib/errors'\nimport ResultsDisplay from '../components/ResultsDisplay'\nimport SearchForm from '../components/SearchForm'\nimport { AppContext, loadResultsFromQuery } from '../state/Context'\nimport { setTitle } from '../lib/setTitle'\n\nconst SearchPage: React.FC<\n    RouteComponentProps & {\n        searchType: 'basic' | 'advanced'\n        title: string\n    }\n> = ({ searchType, title }) => {\n    setTitle([title])\n\n    const { state, dispatch } = useContext(AppContext)\n\n    const navigate = useNavigate()\n\n    const { error } = state\n\n    const handleQueryParams = () => {\n        try {\n            if (\n                // XOR - return early if mismatch\n                Number(searchType === 'advanced') +\n                    Number(\n                        window.location.pathname\n                            .split('/')\n                            .includes('advanced'),\n                    ) ===\n                1\n            ) {\n                return\n            }\n\n            const text = getQueryParam('q')\n            const page = getQueryParam('page') || '1'\n\n            if (text) {\n                dispatch({ searchQuery: text, page: +page })\n\n                loadResultsFromQuery(\n                    text,\n                    { state, dispatch },\n                    { searchType, navigate },\n                )\n            } else {\n                deleteQueryParam('page', false, navigate)\n\n                dispatch({\n                    page: null,\n                    searchQuery: '',\n                    results: null,\n                    resultsLoading: false,\n                })\n            }\n        } catch (e) {\n            deleteQueryParam('q', false, navigate)\n            deleteQueryParam('page', false, navigate)\n\n            console.error(e)\n        }\n    }\n\n    useEffect(() => {\n        dispatch({ searchType })\n\n        handleQueryParams()\n\n        window.addEventListener('popstate', handleQueryParams)\n        ;(async () => {\n            try {\n                await Cedict.all\n            } catch (e) {\n                if (e instanceof NoDataError) {\n                    dispatch({ error: e })\n                }\n            }\n\n            dispatch({ cedictDataLoading: false })\n        })()\n\n        return () => window.removeEventListener('popstate', handleQueryParams)\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dispatch, searchType])\n\n    return error && error instanceof NoDataError ? (\n        <>\n            <Typography variant='h4' paragraph component='h2'>\n                No dictionary data loaded\n            </Typography>\n            <div>\n                <Typography variant='body1' paragraph component='p'>\n                    Dictionary data is required to run this app. Please{' '}\n                    <a href={String('') /* current page */}>reload the page</a>{' '}\n                    and try again.\n                </Typography>\n            </div>\n        </>\n    ) : (\n        <>\n            <SearchForm />\n            <ResultsDisplay />\n        </>\n    )\n}\n\nexport default SearchPage\n","import React, { useContext } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Link from '../components/Link'\nimport { AppContext } from '../state/Context'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        color: 'antiquewhite',\n        textAlign: 'center',\n        paddingTop: '3.5em',\n        paddingBottom: '2em',\n    },\n    heading: {\n        fontFamily: 'ZhiMangXing, Roboto',\n    },\n    subtitle: {\n        padding: '0 2em',\n    },\n}))\n\nconst Header = () => {\n    const { root, heading, subtitle } = useStyles()\n\n    const { dispatch } = useContext(AppContext)\n\n    const clearQuery = () =>\n        dispatch({\n            searchQuery: '',\n            results: null,\n            resultsLoading: false,\n        })\n\n    return (\n        <header className={root}>\n            <Typography variant='h1' component='h1' className={heading}>\n                <Link\n                    tabIndex={-1}\n                    to='/'\n                    onClick={clearQuery}\n                    className='unstyled'\n                >\n                    字字不忘\n                </Link>\n            </Typography>\n            <Typography\n                className={subtitle}\n                variant='subtitle2'\n                component='div'\n            >\n                Zi Zi Bu Wang · Chinese Dictionary Lookup\n            </Typography>\n        </header>\n    )\n}\n\nexport default Header\n","import React from 'react'\n\ninterface ErrorInfoObject {\n    componentStack: any\n}\n\ninterface ErrorBoundaryState {\n    error?: Error\n    errorInfo?: ErrorInfoObject\n}\n\nclass ErrorBoundary extends React.Component {\n    constructor(props: any) {\n        super(props)\n\n        const state: ErrorBoundaryState = {\n            error: undefined,\n            errorInfo: undefined,\n        }\n\n        this.state = state\n    }\n\n    componentDidCatch(error: Error, errorInfo: ErrorInfoObject) {\n        this.setState({\n            error: error,\n            errorInfo: errorInfo,\n        })\n    }\n\n    render() {\n        const { error, errorInfo } = this.state as ErrorBoundaryState\n        const { children } = this.props\n\n        if (error) {\n            return (\n                <div>\n                    <h2>Something went wrong.</h2>\n                    <details style={{ whiteSpace: 'pre-wrap' }}>\n                        {error?.toString()}\n                        <br />\n                        {errorInfo?.componentStack}\n                    </details>\n                </div>\n            )\n        }\n        return children\n    }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport ErrorBoundary from '../components/ErrorBoundary'\nimport { Container } from '@material-ui/core'\n\nconst MainSubLayout: React.FC = ({ children }) => {\n    return (\n        <>\n            <Container maxWidth='sm'>\n                <main>\n                    <ErrorBoundary>{children}</ErrorBoundary>\n                </main>\n            </Container>\n        </>\n    )\n}\n\nexport default MainSubLayout\n","import React, { useContext } from 'react'\nimport { makeStyles, IconButton } from '@material-ui/core'\n\nimport Tooltip from '@material-ui/core/Tooltip'\nimport HomeIcon from '@material-ui/icons/Home'\nimport InfoIcon from '@material-ui/icons/Info'\nimport SettingsIcon from '@material-ui/icons/Settings'\nimport { navigate, useLocation } from '@reach/router'\n\nimport { AppContext } from '../state/Context'\nimport { fade } from '@material-ui/core/styles/colorManipulator'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        zIndex: 1,\n        position: 'fixed',\n        right: 0,\n        top: 0,\n        textAlign: 'right',\n    },\n    listRoot: {\n        listStyleType: 'none',\n        padding: 0,\n    },\n    [theme.breakpoints.up('sm')]: {\n        navItem: {\n            borderRadius: `50% 0 0 50%`,\n        },\n        activeNavItem: {\n            background: fade(theme.palette.primary.main, 0.25),\n            '&:hover': {\n                background: fade(theme.palette.primary.main, 0.35),\n            },\n        },\n        touchRippleChild: {\n            // borderRadius: 0,\n        },\n    },\n    [theme.breakpoints.down('xs')]: {\n        activeNavItem: {\n            color: theme.palette.primary.dark,\n            '&:hover': {\n                background: fade(theme.palette.primary.dark, 0.15),\n            },\n        },\n    },\n}))\n\nconst links = [\n    { to: '/', text: 'Home', Icon: HomeIcon, match: '(/advanced)?' },\n    {\n        to: '/instructions',\n        text: 'Instructions',\n        Icon: InfoIcon,\n        match: '/instructions',\n    },\n    {\n        to: '/settings',\n        text: 'Settings',\n        Icon: SettingsIcon,\n        match: '/settings',\n    },\n]\n\nconst MainNav: React.FC = () => {\n    const classes = useStyles()\n\n    const { dispatch } = useContext(AppContext)\n\n    const location = useLocation()\n\n    const clearQuery = () =>\n        dispatch({\n            searchQuery: '',\n            results: null,\n            resultsLoading: false,\n        })\n\n    return (\n        <nav className={classes.root}>\n            <ul className={classes.listRoot}>\n                {links.map(({ to, text, Icon, match }, idx) => {\n                    const path = `${process.env.PUBLIC_URL}${to}`\n\n                    const matcher = new RegExp(\n                        `^${process.env.PUBLIC_URL}${match}/?([?#]|$)`,\n                    )\n\n                    const isMatch = matcher.test(location.pathname)\n\n                    return (\n                        <li key={idx}>\n                            <Tooltip placement='left' title={text} arrow>\n                                <IconButton\n                                    className={\n                                        isMatch\n                                            ? [\n                                                  classes.navItem,\n                                                  classes.activeNavItem,\n                                              ].join(' ')\n                                            : classes.navItem\n                                    }\n                                    TouchRippleProps={{\n                                        classes: {\n                                            child: classes.touchRippleChild,\n                                        },\n                                    }}\n                                    role='link'\n                                    onClick={() => {\n                                        clearQuery()\n\n                                        navigate(path)\n                                    }}\n                                    aria-label={text}\n                                >\n                                    <Icon />\n                                </IconButton>\n                            </Tooltip>\n                        </li>\n                    )\n                })}\n            </ul>\n        </nav>\n    )\n}\n\nexport default MainNav\n","import React from 'react'\nimport Header from '../components/Header'\nimport MainSubLayout from './MainSubLayout'\nimport MainNav from '../components/MainNav'\nimport { RouteComponentProps } from '@reach/router'\n\nconst MainLayout: React.FC<RouteComponentProps & { className: string }> = ({\n    children,\n    className,\n}) => {\n    return (\n        <div className={className}>\n            <MainNav />\n            <Header />\n            <MainSubLayout>{children}</MainSubLayout>\n        </div>\n    )\n}\n\nexport default MainLayout\n","import snarkdown from 'snarkdown'\n\nconst snarkdownPlus = (md: string) => {\n    const paras = md\n        .split(/(?:\\r?\\n){2,}/)\n        .map(l =>\n            l.startsWith('#') || /^\\s+$/.test(l)\n                ? snarkdown(l)\n                : `<p>${snarkdown(l)}</p>`,\n        )\n\n    return paras.join('\\n\\n')\n}\n\nexport default snarkdownPlus\n","import React, { useEffect, useState } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport { useNavigate } from '@reach/router'\nimport Link from '../components/Link'\n\nimport contentMdUrl from '../content/instructions.md'\nimport snarkdownPlus from '../lib/snarkdownPlus'\nimport { setTitle } from '../lib/setTitle'\n\ninterface Sample {\n    title: string\n    query: string\n}\n\nconst contentPromise = (async () => {\n    const res = await fetch(contentMdUrl, { cache: 'force-cache' })\n    const text = await res.text()\n\n    const [_instructions, _sampleBlock] = text.split('## Samples')\n\n    const _samples = _sampleBlock\n        .replace(/^```.*/gm, '')\n        .trim()\n        .split(/\\r?\\n---\\r?\\n/)\n        .map(el => el.trim())\n        .map(el => {\n            const lines = el.split('\\n')\n            const title = lines\n                .filter(l => l.startsWith('#'))\n                .map(l => l.replace(/^#\\s*/, ''))\n                .join('\\n')\n\n            const query = lines\n                .filter(l => !l.startsWith('#') && !/^\\s*$/.test(l))\n                .join('\\n')\n\n            return { title, query }\n        })\n\n    return { _samples, _instructions }\n})()\n\nconst DocsPage: React.FC<RouteComponentProps & { title: string }> = ({\n    title,\n}) => {\n    setTitle([title])\n\n    const [instructions, setInstructions] = useState('')\n    const [samples, setSamples] = useState<Sample[]>([])\n\n    const navigate = useNavigate()\n\n    useEffect(() => {\n        ;(async () => {\n            const { _samples, _instructions } = await contentPromise\n\n            setSamples(_samples)\n\n            setInstructions(snarkdownPlus(_instructions))\n\n            setTimeout(() => {\n                if (window.location.hash) {\n                    document\n                        .querySelector(window.location.hash)\n                        ?.scrollIntoView(true)\n                }\n            }, 300)\n        })()\n    }, [])\n\n    return (\n        <>\n            <div\n                dangerouslySetInnerHTML={{ __html: instructions }}\n                onClick={e => {\n                    const target = e.target as HTMLAnchorElement\n                    const href = target.href\n\n                    if (href) {\n                        e.preventDefault()\n\n                        if (\n                            href.startsWith('http') &&\n                            !href.startsWith(window.location.origin)\n                        ) {\n                            window.open(href, '_blank', 'noopener noreferrer')\n                        } else {\n                            navigate(href)\n                        }\n                    }\n                }}\n            />\n            <ul>\n                {samples.map(({ title, query }) => {\n                    const queryString = `?q=${encodeURIComponent(\n                        `# ${title}\\n\\n${query}`,\n                    )}`.replace(/%20/g, '+')\n\n                    return (\n                        <li key={title}>\n                            <Link to={`/advanced/${queryString}`}>{title}</Link>\n                        </li>\n                    )\n                })}\n            </ul>\n        </>\n    )\n}\n\nexport default DocsPage\n","import React, { useContext } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport {\n    FormControl,\n    FormLabel,\n    RadioGroup,\n    FormControlLabel,\n    Radio,\n    FormGroup,\n    Checkbox,\n    makeStyles,\n} from '@material-ui/core'\nimport { AppContext } from '../state/Context'\nimport { fuzzyReplacements } from '../lib/makeRegex'\nimport { setTitle } from '../lib/setTitle'\n\nconst useStyles = makeStyles(_theme => ({\n    formGroup: { padding: '1em 0' },\n}))\n\nconst SettingsPage: React.FC<RouteComponentProps & { title: string }> = ({\n    title,\n}) => {\n    setTitle([title])\n\n    const classes = useStyles()\n\n    const { state, dispatch } = useContext(AppContext)\n\n    const { charSet, enabledFuzzyReplacementIds } = state\n\n    return (\n        <form onSubmit={e => e.preventDefault()}>\n            <FormGroup className={classes.formGroup}>\n                <FormControl component='fieldset'>\n                    <FormLabel component='legend'>\n                        Default character set\n                    </FormLabel>\n                    <RadioGroup\n                        aria-label='Default character set'\n                        name='character-set'\n                        value={charSet}\n                        onChange={e => {\n                            const charSet = e.currentTarget.value as\n                                | 'trad'\n                                | 'simp'\n\n                            localStorage.setItem('charSet', charSet)\n\n                            dispatch({ charSet })\n                        }}\n                    >\n                        <FormControlLabel\n                            value='simp'\n                            control={<Radio />}\n                            label='简 Simplified'\n                        />\n                        <FormControlLabel\n                            value='trad'\n                            control={<Radio />}\n                            label='繁 Traditional'\n                        />\n                    </RadioGroup>\n                </FormControl>\n            </FormGroup>\n\n            <FormGroup className={classes.formGroup}>\n                <FormControl component='fieldset'>\n                    <FormLabel component='legend'>Fuzzy pinyin</FormLabel>\n                    <FormGroup>\n                        {fuzzyReplacements.map(({ name, id }) => {\n                            return (\n                                <FormControlLabel\n                                    key={id}\n                                    control={\n                                        <Checkbox\n                                            checked={\n                                                enabledFuzzyReplacementIds[\n                                                    id\n                                                ] || false\n                                            }\n                                            onChange={e => {\n                                                enabledFuzzyReplacementIds[id] =\n                                                    e.currentTarget.checked\n\n                                                dispatch({\n                                                    enabledFuzzyReplacementIds,\n                                                })\n\n                                                localStorage.setItem(\n                                                    'enabledFuzzyReplacementIds',\n                                                    JSON.stringify(\n                                                        enabledFuzzyReplacementIds,\n                                                    ),\n                                                )\n                                            }}\n                                            name={id}\n                                        />\n                                    }\n                                    label={name}\n                                />\n                            )\n                        })}\n                    </FormGroup>\n                </FormControl>\n            </FormGroup>\n        </form>\n    )\n}\n\nexport default SettingsPage\n","import React from 'react'\n\nimport './lib/injectDynamicStyles'\n\nimport SearchPage from './pages/SearchPage'\nimport MainLayout from './layouts/MainLayout'\n\nimport { Router } from '@reach/router'\nimport DocsPage from './pages/DocsPage'\nimport SettingsPage from './pages/SettingsPage'\n\nconst AppRouter: React.FC = () => {\n    return (\n        <Router basepath={process.env.PUBLIC_URL}>\n            <MainLayout path='/' className='content-container'>\n                <SearchPage title='Search' path='/' searchType='basic' />\n                <SearchPage\n                    title='Advanced Search'\n                    path='/advanced'\n                    searchType='advanced'\n                />\n                <DocsPage title='Instructions' path='/instructions' />\n                <SettingsPage title='Settings' path='/settings' />\n            </MainLayout>\n        </Router>\n    )\n}\n\nexport default AppRouter\n","import './lib/setup'\nimport './lib/injectDynamicStyles'\n\nimport React from 'react'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nimport { theme } from './lib/theme'\n\nimport PageBackground from './components/PageBackground'\n\nimport { Container } from '@material-ui/core'\nimport Footer from './components/Footer'\nimport { AppStateProvider } from './state/Context'\nimport ModalContainer from 'react-modal-promise'\nimport AppRouter from './AppRouter'\n\nconst App: React.FC = () => {\n    return (\n        <AppStateProvider>\n            <ThemeProvider theme={theme}>\n                <ModalContainer />\n                <PageBackground />\n                <div className='everything-container'>\n                    <AppRouter />\n                    <Container className='footer-container' maxWidth='sm'>\n                        <Footer />\n                    </Container>\n                </div>\n            </ThemeProvider>\n        </AppStateProvider>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.info(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.info(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.info('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.info(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n","module.exports = __webpack_public_path__ + \"static/media/cc-cedict.02fc0569.tsv\";","module.exports = __webpack_public_path__ + \"static/media/ZhiMangXing-Regular-subset.c382153c.ttf\";","module.exports = __webpack_public_path__ + \"static/media/pinyin-syllables.42676c8b.tsv\";","module.exports = __webpack_public_path__ + \"static/media/instructions.3cb44add.md\";"],"sourceRoot":""}